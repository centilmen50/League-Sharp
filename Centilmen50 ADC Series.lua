assert(load(Base64Decode("bG9jYWwgdmVyc2lvbiA9ICJCRVRBIg0KDQpyZXF1aXJlICdTeE9yYndhbGsnDQpyZXF1aXJlICdWUHJlZGljdGlvbicNCmlmIFZJUF9VU0VSIHRoZW4gcmVxdWlyZSAnUHJvZGljdGlvbicgZW5kDQoNCmlmIG15SGVyby5jaGFyTmFtZSA9PSAiRXpyZWFsIiB0aGVuDQoNCg0KcmVxdWlyZSAnQmFzZVVsdCcNCg0KDQoNCmZ1bmN0aW9uIE9uTG9hZCgpDQoJVmFyaWFibGVzKCkNCglNZW51KCkNCglQcmlvcml0eU9uTG9hZCgpDQoJUHJpbnRDaGF0KCI8Zm9udCBjb2xvcj1cIiNGRkZGMDBcIj5FenJlYWwgQmV0YSA8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj5DZW50aWxtZW41MCIpDQplbmQNCg0KZnVuY3Rpb24gT25UaWNrKCkNCglDb21ib0tleSA9IFNldHRpbmdzLmNvbWJvLmNvbWJvS2V5DQoJSGFyYXNzS2V5ID0gU2V0dGluZ3MuaGFyYXNzLmhhcmFzc0tleQ0KCUhhcmFzc1RvZ2dsZSA9IFNldHRpbmdzLmhhcmFzcy5oYXJhc3NUb2dnbGUNCglGYXJtS2V5ID0gU2V0dGluZ3MuZmFybS5mYXJtS2V5DQoJSnVuZ2xlQ2xlYXJLZXkgPSBTZXR0aW5ncy5qdW5nbGUuanVuZ2xlS2V5DQoJTGFuZUNsZWFyS2V5ID0gU2V0dGluZ3MubGFuZS5sYW5lS2V5DQoJDQoJaWYgQ29tYm9LZXkgdGhlbg0KCQlDb21ibyhUYXJnZXQpDQoJZW5kDQoJDQoJaWYgSGFyYXNzS2V5IHRoZW4NCgkJSGFyYXNzKFRhcmdldCkNCgllbHNlaWYgSGFyYXNzVG9nZ2xlIHRoZW4NCgkJSGFyYXNzKFRhcmdldCkNCgllbmQNCgkNCglpZiBGYXJtS2V5IHRoZW4NCgkJRmFybSgpDQoJZW5kDQoJDQoJaWYgSnVuZ2xlQ2xlYXJLZXkgdGhlbg0KCQlKdW5nbGVDbGVhcigpDQoJZW5kDQoJDQoJaWYgTGFuZUNsZWFyS2V5IHRoZW4NCgkJTGFuZUNsZWFyKCkNCgllbmQNCgkNCglpZiBTZXR0aW5ncy5rcy5raWxsU3RlYWwgdGhlbg0KCQlLaWxsU3RlYWwoKQ0KCWVuZA0KDQoJQ2hlY2tzKCkNCmVuZA0KDQpmdW5jdGlvbiBPbkRyYXcoKQ0KCWlmIG5vdCBteUhlcm8uZGVhZCBhbmQgbm90IFNldHRpbmdzLmRyYXdpbmcubURyYXcgdGhlbg0KCQlpZiBTa2lsbFEucmVhZHkgYW5kIFNldHRpbmdzLmRyYXdpbmcucURyYXcgdGhlbiANCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU2tpbGxRLnJhbmdlLCBSR0IoU2V0dGluZ3MuZHJhd2luZy5xQ29sb3JbMl0sIFNldHRpbmdzLmRyYXdpbmcucUNvbG9yWzNdLCBTZXR0aW5ncy5kcmF3aW5nLnFDb2xvcls0XSkpDQoJCWVuZA0KCQlpZiBTa2lsbFcucmVhZHkgYW5kIFNldHRpbmdzLmRyYXdpbmcud0RyYXcgdGhlbiANCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU2tpbGxXLnJhbmdlLCBSR0IoU2V0dGluZ3MuZHJhd2luZy53Q29sb3JbMl0sIFNldHRpbmdzLmRyYXdpbmcud0NvbG9yWzNdLCBTZXR0aW5ncy5kcmF3aW5nLndDb2xvcls0XSkpDQoJCWVuZA0KCQlpZiBTa2lsbEUucmVhZHkgYW5kIFNldHRpbmdzLmRyYXdpbmcuZURyYXcgdGhlbiANCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgU2tpbGxFLnJhbmdlLCBSR0IoU2V0dGluZ3MuZHJhd2luZy5lQ29sb3JbMl0sIFNldHRpbmdzLmRyYXdpbmcuZUNvbG9yWzNdLCBTZXR0aW5ncy5kcmF3aW5nLmVDb2xvcls0XSkpDQoJCWVuZA0KCQkNCgkJaWYgU2V0dGluZ3MuZHJhd2luZy5teUhlcm8gdGhlbg0KCQkJRHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCBUcnVlUmFuZ2UoKSwgUkdCKFNldHRpbmdzLmRyYXdpbmcubXlDb2xvclsyXSwgU2V0dGluZ3MuZHJhd2luZy5teUNvbG9yWzNdLCBTZXR0aW5ncy5kcmF3aW5nLm15Q29sb3JbNF0pKQ0KCQllbmQNCgkJDQoJCWlmIFNldHRpbmdzLmRyYXdpbmcuVGFyZ2V0IGFuZCBUYXJnZXQgfj0gbmlsIHRoZW4NCgkJCURyYXdDaXJjbGUoVGFyZ2V0LngsIFRhcmdldC55LCBUYXJnZXQueiwgODAsIEFSR0IoMjU1LCAxMCwgMjU1LCAxMCkpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0JCQkgRm9ua3NpeW9ubGFyCQkJDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KZnVuY3Rpb24gQ29tYm8odW5pdCkNCglpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgdW5pdCB+PSBuaWwgYW5kIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuDQoJCWlmIFNldHRpbmdzLmNvbWJvLmNvbWJvSXRlbXMgdGhlbg0KCQkJVXNlSXRlbXModW5pdCkNCgkJZW5kDQoJCQ0KCQlpZiBTZXR0aW5ncy5jb21iby51c2VSMiB0aGVuIENhc3RSKHVuaXQpIGVuZA0KCQlDYXN0RSh1bml0KQ0KCQlDYXN0USh1bml0KQ0KCQlpZiBTZXR0aW5ncy5jb21iby51c2VXIHRoZW4gQ2FzdFcodW5pdCkgZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSGFyYXNzKHVuaXQpDQoJaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIHVuaXQgfj0gbmlsIGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIG5vdCBJc015TWFuYUxvdygiSGFyYXNzIikgdGhlbg0KCQlpZiBTZXR0aW5ncy5oYXJhc3MudXNlUSB0aGVuIENhc3RRKHVuaXQpIGVuZA0KCQlpZiBTZXR0aW5ncy5oYXJhc3MudXNlVyB0aGVuIENhc3RXKHVuaXQpIGVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEZhcm0oKQ0KCWVuZW15TWluaW9uczp1cGRhdGUoKQ0KCWlmIEZhcm1LZXkgYW5kIG5vdCBJc015TWFuYUxvdygiRmFybSIpIHRoZW4NCgkJZm9yIGksIG1pbmlvbiBpbiBwYWlycyhlbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCgkJCWlmIFNldHRpbmdzLmZhcm0uZmFybVEgdGhlbg0KCQkJCWlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgYW5kIG15SGVybzpDYWxjRGFtYWdlKG1pbmlvbiwgKCg1Kig0ICogbXlIZXJvOkdldFNwZWxsRGF0YSgwKS5sZXZlbCArIDMpKSArIG15SGVyby50b3RhbERhbWFnZSArIChteUhlcm8uYXAqMC40KSkpID4gVlA6R2V0UHJlZGljdGVkSGVhbHRoKG1pbmlvbiwgMSwgU2tpbGxRLmRlbGF5ICArIEdldERpc3RhbmNlKG15SGVybywgbWluaW9uLnBvcykgLyBTa2lsbFEuc3BlZWQgLSBHZXRMYXRlbmN5KCkvMTAwMCkgdGhlbg0KCQkJCQlDYXN0UShtaW5pb24pDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gTGFuZUNsZWFyKCkNCgllbmVteU1pbmlvbnM6dXBkYXRlKCkNCglpZiBMYW5lQ2xlYXJLZXkgYW5kIG5vdCBJc015TWFuYUxvdygiTGFuZUNsZWFyIikgdGhlbg0KCQlmb3IgaSwgbWluaW9uIGluIHBhaXJzKGVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KCQkJaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgbWluaW9uIH49IG5pbCB0aGVuDQoJCQkJaWYgU2V0dGluZ3MubGFuZS5sYW5lUSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBTa2lsbFEucmFuZ2UgYW5kIFNraWxsUS5yZWFkeSB0aGVuDQoJCQkJCUNhc3RTcGVsbChfUSwgbWluaW9uLngsIG1pbmlvbi56KQ0KCQkJCWVuZA0KCQkJZW5kCQkgDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEp1bmdsZUNsZWFyKCkNCglpZiBTZXR0aW5ncy5qdW5nbGUuanVuZ2xlS2V5IGFuZCBub3QgSXNNeU1hbmFMb3coIkp1bmdsZUNsZWFyIikgdGhlbg0KCQlsb2NhbCBKdW5nbGVNb2IgPSBHZXRKdW5nbGVNb2IoKQ0KCQkNCgkJaWYgSnVuZ2xlTW9iIH49IG5pbCB0aGVuDQoJCQlpZiBTZXR0aW5ncy5qdW5nbGUuanVuZ2xlUSBhbmQgR2V0RGlzdGFuY2UoSnVuZ2xlTW9iKSA8PSBTa2lsbFEucmFuZ2UgYW5kIFNraWxsUS5yZWFkeSB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9RLCBKdW5nbGVNb2IueCwgSnVuZ2xlTW9iLnopDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2FzdFEodW5pdCkJDQoJaWYgdW5pdCB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IFNraWxsUS5yYW5nZSBhbmQgU2tpbGxRLnJlYWR5IHRoZW4NCgkJaWYgU2V0dGluZ3MubWlzYy5wcmVkaWN0aW9uID09IDEgdGhlbg0KCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCAgSGl0Q2hhbmNlLCAgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHVuaXQsIFNraWxsUS5kZWxheSwgU2tpbGxRLndpZHRoLCBTa2lsbFEucmFuZ2UsIFNraWxsUS5zcGVlZCwgbXlIZXJvLCB0cnVlKQ0KCQkJCQkNCgkJCWlmIEhpdENoYW5jZSA+PSAyIHRoZW4NCgkJCQlDYXN0U3BlbGwoX1EsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJCWVuZA0KCQllbHNlaWYgU2V0dGluZ3MubWlzYy5wcmVkaWN0aW9uID09IDIgYW5kIFZJUF9VU0VSIHRoZW4NCgkJCWxvY2FsIHBvcywgaW5mbyA9IFByb2RpY3Rpb24uR2V0UHJlZGljdGlvbih1bml0LCBTa2lsbFEucmFuZ2UsIFNraWxsUS5zcGVlZCwgU2tpbGxRLmRlbGF5LCBTa2lsbFEud2lkdGgpDQoJCQkNCgkJCWlmIHBvcyB+PSBuaWwgYW5kIG5vdCBpbmZvLm1Db2xsaXNpb24oKSB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9RLCBwb3MueCwgcG9zLnopDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2FzdFcodW5pdCkNCglpZiB1bml0IH49IG5pbCBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPD0gU2tpbGxXLnJhbmdlIGFuZCBTa2lsbFcucmVhZHkgdGhlbg0KCQlpZiBTZXR0aW5ncy5taXNjLnByZWRpY3Rpb24gPT0gMSB0aGVuDQoJCQlsb2NhbCBDYXN0UG9zaXRpb24sICBIaXRDaGFuY2UsICBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odW5pdCwgU2tpbGxXLmRlbGF5LCBTa2lsbFcud2lkdGgsIFNraWxsVy5yYW5nZSwgU2tpbGxXLnNwZWVkLCBteUhlcm8pDQoJCQkJDQoJCQlpZiBIaXRDaGFuY2UgPj0gMiB0aGVuDQoJCQkJQ2FzdFNwZWxsKF9XLCBDYXN0UG9zaXRpb24ueCwgQ2FzdFBvc2l0aW9uLnopDQoJCQllbmQNCgkJZWxzZWlmIFNldHRpbmdzLm1pc2MucHJlZGljdGlvbiA9PSAyIGFuZCBWSVBfVVNFUiB0aGVuDQoJCQlsb2NhbCBwb3MsIGluZm8gPSBQcm9kaWN0aW9uLkdldFByZWRpY3Rpb24odW5pdCwgU2tpbGxXLnJhbmdlLCBTa2lsbFcuc3BlZWQsIFNraWxsVy5kZWxheSwgU2tpbGxXLndpZHRoKQ0KCQkJDQoJCQlpZiBwb3Mgfj0gbmlsIHRoZW4NCgkJCQlDYXN0U3BlbGwoX1csIHBvcy54LCBwb3MueikNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0RSh1bml0KQ0KCWlmIFNldHRpbmdzLmNvbWJvLnVzZUUgPT0gMyB0aGVuIHJldHVybiBlbmQNCg0KCWlmIFNldHRpbmdzLmNvbWJvLnVzZUUgPT0gMiBhbmQgdW5pdCB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IChTa2lsbFEucmFuZ2UgKyBTa2lsbEUucmFuZ2UpIGFuZCBTa2lsbEUucmVhZHkgdGhlbg0KCQlDYXN0U3BlbGwoX0UsIHVuaXQueCwgdW5pdC56KQ0KCWVsc2VpZiBTZXR0aW5ncy5jb21iby51c2VFID09IDEgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IChTa2lsbFEucmFuZ2UgKyBTa2lsbEUucmFuZ2UpIHRoZW4NCgkJbG9jYWwgTW91c2UgPSBWZWN0b3IobXlIZXJvKSArIDQwMCAqIChWZWN0b3IobW91c2VQb3MpIC0gVmVjdG9yKG15SGVybykpOm5vcm1hbGl6ZWQoKQ0KCQkNCgkJQ2FzdFNwZWxsKF9FLCBNb3VzZS54LCBNb3VzZS56KQ0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RSKHVuaXQpDQoJaWYgQ29tYm9LZXkgYW5kIFNldHRpbmdzLmNvbWJvLnVzZVIyID09IDEgdGhlbiByZXR1cm4gZW5kDQoJaWYgdW5pdCB+PSBuaWwgYW5kIFNraWxsUi5yZWFkeSB0aGVuDQoJCWlmIFNldHRpbmdzLm1pc2MucHJlZGljdGlvbiA9PSAxIHRoZW4NCgkJCWxvY2FsIEFPRUNhc3RQb3NpdGlvbiwgTWFpblRhcmdldEhpdENoYW5jZSwgblRhcmdldHMgPSBWUDpHZXRMaW5lQU9FQ2FzdFBvc2l0aW9uKHVuaXQsIFNraWxsUi5kZWxheSwgU2tpbGxSLndpZHRoLCBTa2lsbFIucmFuZ2UsIFNraWxsUi5zcGVlZCwgbXlIZXJvKQ0KCQkJDQoJCQlpZiBNYWluVGFyZ2V0SGl0Q2hhbmNlID49IDIgdGhlbg0KCQkJCWlmIENvbWJvS2V5IHRoZW4NCgkJCQkJaWYgU2V0dGluZ3MuY29tYm8udXNlUjIgPT0gMiBhbmQgblRhcmdldHMgPj0gMSB0aGVuDQoJCQkJCQlDYXN0U3BlbGwoX1IsIEFPRUNhc3RQb3NpdGlvbi54LCBBT0VDYXN0UG9zaXRpb24ueikgDQoJCQkJCWVsc2VpZiBTZXR0aW5ncy5jb21iby51c2VSMiA9PSAzIGFuZCBuVGFyZ2V0cyA+PSAyIHRoZW4NCgkJCQkJCUNhc3RTcGVsbChfUiwgQU9FQ2FzdFBvc2l0aW9uLngsIEFPRUNhc3RQb3NpdGlvbi56KSANCgkJCQkJZWxzZWlmIFNldHRpbmdzLmNvbWJvLnVzZVIyID09IDQgYW5kIG5UYXJnZXRzID49IDMgdGhlbg0KCQkJCQkJQ2FzdFNwZWxsKF9SLCBBT0VDYXN0UG9zaXRpb24ueCwgQU9FQ2FzdFBvc2l0aW9uLnopIA0KCQkJCQllbHNlaWYgU2V0dGluZ3MuY29tYm8udXNlUjIgPT0gNSBhbmQgblRhcmdldHMgPj0gNCB0aGVuDQoJCQkJCQlDYXN0U3BlbGwoX1IsIEFPRUNhc3RQb3NpdGlvbi54LCBBT0VDYXN0UG9zaXRpb24ueikgDQoJCQkJCWVuZA0KCQkJCWVsc2UNCgkJCQkJQ2FzdFNwZWxsKF9SLCBBT0VDYXN0UG9zaXRpb24ueCwgQU9FQ2FzdFBvc2l0aW9uLnopDQoJCQkJZW5kDQoJCQllbmQNCgkJZWxzZWlmIFNldHRpbmdzLm1pc2MucHJlZGljdGlvbiA9PSAyIGFuZCBWSVBfVVNFUiB0aGVuDQoJCQlsb2NhbCBwb3MsIGluZm8gPSBQcm9kaWN0aW9uLkdldFByZWRpY3Rpb24odW5pdCwgU2tpbGxSLnJhbmdlLCBTa2lsbFIuc3BlZWQsIFNraWxsUi5kZWxheSwgU2tpbGxSLndpZHRoKQ0KCQkJDQoJCQlpZiBwb3Mgfj0gbmlsIHRoZW4NCgkJCQlDYXN0U3BlbGwoX1IsIHBvcy54LCBwb3MueikNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBLaWxsU3RlYWwoKQ0KCWZvciBfLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJaWYgVmFsaWRUYXJnZXQoZW5lbXkpIGFuZCBlbmVteS52aXNpYmxlIHRoZW4NCgkJCWxvY2FsIHFEbWcgPSBteUhlcm86Q2FsY0RhbWFnZShlbmVteSwgKCg1Kig0ICogbXlIZXJvOkdldFNwZWxsRGF0YSgwKS5sZXZlbCArIDMpKSArIG15SGVyby50b3RhbERhbWFnZSArIChteUhlcm8uYXAqMC40KSkpDQoJCQlsb2NhbCB3RG1nID0gZ2V0RG1nKCJXIiwgZW5lbXksIG15SGVybykNCgkJCWxvY2FsIHJEbWcgPSBnZXREbWcoIlIiLCBlbmVteSwgbXlIZXJvKQ0KCQkJDQoJCQlpZiBTZXR0aW5ncy5rcy5rc1EgYW5kIGVuZW15LmhlYWx0aCA8PSBxRG1nIHRoZW4NCgkJCQlDYXN0UShlbmVteSkNCgkJCWVsc2VpZiBTZXR0aW5ncy5rcy5rc1EgYW5kIFNldHRpbmdzLmtzLmtzVyBhbmQgZW5lbXkuaGVhbHRoIDw9IChxRG1nICsgd0RtZykgYW5kIEdldERpc3RhbmNlKGVuZW15KSA8IFNraWxsVy5yYW5nZSB0aGVuDQoJCQkJQ2FzdFcoZW5lbXkpDQoJCQkJQ2FzdFEoZW5lbXkpDQoJCQllbHNlaWYgU2V0dGluZ3Mua3Mua3NXIGFuZCBlbmVteS5oZWFsdGggPD0gd0RtZyB0aGVuDQoJCQkJQ2FzdFcoZW5lbXkpDQoJCQllbHNlaWYgU2V0dGluZ3Mua3Mua3NSIGFuZCBlbmVteS5oZWFsdGggPD0gckRtZyBhbmQgR2V0RGlzdGFuY2UoZW5lbXkpIDw9IFNraWxsUi5yYW5nZSB0aGVuDQoJCQkJQ2FzdFIoZW5lbXkpDQoJCQllbmQNCg0KCQkJaWYgU2V0dGluZ3Mua3MuYXV0b0lnbml0ZSB0aGVuDQoJCQkJQXV0b0lnbml0ZShlbmVteSkNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBBdXRvSWduaXRlKHVuaXQpDQoJaWYgVmFsaWRUYXJnZXQodW5pdCwgSWduaXRlLnJhbmdlKSBhbmQgdW5pdC5oZWFsdGggPD0gNTAgKyAoMjAgKiBteUhlcm8ubGV2ZWwpIHRoZW4NCgkJaWYgSWduaXRlLnJlYWR5IHRoZW4NCgkJCUNhc3RTcGVsbChJZ25pdGUuc2xvdCwgdW5pdCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLQkJCSBNZW51bGVyIEZhbGFuCQkNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBDaGVja3MoKQ0KCVNraWxsUS5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZKQ0KCVNraWxsVy5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZKQ0KCVNraWxsRS5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZKQ0KCVNraWxsUi5yZWFkeSA9IChteUhlcm86Q2FuVXNlU3BlbGwoX1IpID09IFJFQURZKQ0KCQ0KCWlmIG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMSkubmFtZTpmaW5kKElnbml0ZS5uYW1lKSB0aGVuDQoJCUlnbml0ZS5zbG90ID0gU1VNTU9ORVJfMQ0KCWVsc2VpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNVTU1PTkVSXzIpLm5hbWU6ZmluZChJZ25pdGUubmFtZSkgdGhlbg0KCQlJZ25pdGUuc2xvdCA9IFNVTU1PTkVSXzINCgllbmQNCgkNCglJZ25pdGUucmVhZHkgPSAoSWduaXRlLnNsb3Qgfj0gbmlsIGFuZCBteUhlcm86Q2FuVXNlU3BlbGwoSWduaXRlLnNsb3QpID09IFJFQURZKQ0KCQ0KCVRhcmdldFNlbGVjdG9yOnVwZGF0ZSgpDQoJVGFyZ2V0ID0gR2V0Q3VzdG9tVGFyZ2V0KCkNCglTeE9yYjpGb3JjZVRhcmdldChUYXJnZXQpDQoJDQoJaWYgU2V0dGluZ3MuZHJhd2luZy5sZmMubGZjIHRoZW4gX0cuRHJhd0NpcmNsZSA9IERyYXdDaXJjbGUyIGVsc2UgX0cuRHJhd0NpcmNsZSA9IF9HLm9sZERyYXdDaXJjbGUgZW5kDQoJDQoJU2V0UlJhbmdlKCkNCmVuZA0KDQpmdW5jdGlvbiBJc015TWFuYUxvdyhtb2RlKQ0KCWlmIG1vZGUgPT0gIkhhcmFzcyIgdGhlbg0KCQlpZiBteUhlcm8ubWFuYSA8IChteUhlcm8ubWF4TWFuYSAqICggU2V0dGluZ3MuaGFyYXNzLmhhcmFzc01hbmEgLyAxMDApKSB0aGVuDQoJCQlyZXR1cm4gdHJ1ZQ0KCQllbHNlDQoJCQlyZXR1cm4gZmFsc2UNCgkJZW5kDQoJZWxzZWlmIG1vZGUgPT0gIkxhbmVDbGVhciIgdGhlbg0KCQlpZiBteUhlcm8ubWFuYSA8IChteUhlcm8ubWF4TWFuYSAqICggU2V0dGluZ3MubGFuZS5sYW5lTWFuYSAvIDEwMCkpIHRoZW4NCgkJCXJldHVybiB0cnVlDQoJCWVsc2UNCgkJCXJldHVybiBmYWxzZQ0KCQllbmQNCgllbHNlaWYgbW9kZSA9PSAiSnVuZ2xlQ2xlYXIiIHRoZW4NCgkJaWYgbXlIZXJvLm1hbmEgPCAobXlIZXJvLm1heE1hbmEgKiAoIFNldHRpbmdzLmp1bmdsZS5qdW5nbGVNYW5hIC8gMTAwKSkgdGhlbg0KCQkJcmV0dXJuIHRydWUNCgkJZWxzZQ0KCQkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVsc2VpZiBtb2RlID09ICJGYXJtIiB0aGVuDQoJCWlmIG15SGVyby5tYW5hIDwgKG15SGVyby5tYXhNYW5hICogKCBTZXR0aW5ncy5mYXJtLmZhcm1NYW5hIC8gMTAwKSkgdGhlbg0KCQkJcmV0dXJuIHRydWUNCgkJZWxzZQ0KCQkJcmV0dXJuIGZhbHNlDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIE1lbnUoKQ0KCVNldHRpbmdzID0gc2NyaXB0Q29uZmlnKCJFenJlYWwgIi4udmVyc2lvbi4uIiIsICJDZW50aWxtZW41MHMiKQ0KCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIktvbWJvIEF5YXJsYXJpIiwgImNvbWJvIikNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oImNvbWJvS2V5IiwgIktvbWJvIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KCQlTZXR0aW5ncy5jb21ibzphZGRQYXJhbSgidXNlUSIsICIiLi5Ta2lsbFEubmFtZS4uIiAoUSkgS29tYm9kYSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIiIuLlNraWxsVy5uYW1lLi4iIChXKSBLb21ib2RhIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oInVzZUUiLCAiIi4uU2tpbGxFLm5hbWUuLiIgKEUpIEtvbWJvZGEgS3VsbGFuIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsgIkZhcmUgWW9udW5kZSIsICJTYW1waXlvbmEgRG9ncnUifSkNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oInVzZVIyIiwgIiIuLlNraWxsUi5uYW1lLi4iIChSKSBLb21ib2RhIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9MSVNULCAyLCB7ICJGYXJrZXRtZXoiLCAiRW4gQXogMSBIZWRlZiIsICJFbiBBeiAyIEhlZGVmIiwgIkVuIEF6IDMgSGVkZWYiLCAiRW4gQXogNCBIZWRlZiIgfSkNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oImNvbWJvSXRlbXMiLCAiSXRlbSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmNvbWJvOnBlcm1hU2hvdygiY29tYm9LZXkiKQ0KCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIkR1cnRtZSBBeWFybGFyaSIsICJoYXJhc3MiKQ0KCQlTZXR0aW5ncy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc0tleSIsICJEdXJ0IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIEdldEtleSgiQyIpKQ0KCQlTZXR0aW5ncy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc1RvZ2dsZSIsICJTdXJla2xpIER1cnQiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBHZXRLZXkoIlQiKSkNCgkJU2V0dGluZ3MuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgIiIuLlNraWxsUS5uYW1lLi4iIChRKSBEdXJ0bWVkZSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmhhcmFzczphZGRQYXJhbSgidXNlVyIsICIiLi5Ta2lsbFcubmFtZS4uIiAoVykgRHVydG1lZGUgS3VsbGFuIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc01hbmEiLCAiTWluaW11bSBNYW5hOiAiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAwLCAxMDAsIDApDQoJCVNldHRpbmdzLmhhcmFzczpwZXJtYVNob3coImhhcmFzc0tleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIkZhcm0gQXlhcmxhcmkiLCAiZmFybSIpDQoJCVNldHRpbmdzLmZhcm06YWRkUGFyYW0oImZhcm1LZXkiLCAiRmFybSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoIlgiKSkNCgkJU2V0dGluZ3MuZmFybTphZGRQYXJhbSgiZmFybVEiLCAiRmFybSBBbGlya2VuICIuLlNraWxsUS5uYW1lLi4iIChRKSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmZhcm06YWRkUGFyYW0oImZhcm1NYW5hIiwgIk1pbmltdW0gTWFuYTogIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMCwgMTAwLCAwKQ0KCQlTZXR0aW5ncy5mYXJtOnBlcm1hU2hvdygiZmFybUtleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIktvcmlkb3IgVGVtaXpsZW1lIEF5YXJsYXJpIiwgImxhbmUiKQ0KCQlTZXR0aW5ncy5sYW5lOmFkZFBhcmFtKCJsYW5lS2V5IiwgIktvcmlkb3IgVGVtaXpsZW1lIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIEdldEtleSgiViIpKQ0KCQlTZXR0aW5ncy5sYW5lOmFkZFBhcmFtKCJsYW5lUSIsICJLb3JpZG9yIFRlbWl6bGVya2VuICIuLlNraWxsUS5uYW1lLi4iIChRKSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmxhbmU6YWRkUGFyYW0oImxhbmVNYW5hIiwgIk1pbmltdW0gTWFuYTogIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMCwgMTAwLCAwKQ0KCQlTZXR0aW5ncy5sYW5lOnBlcm1hU2hvdygibGFuZUtleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIk9ybWFuIFRlbWl6bGVtZSBBeWFybGFyaSIsICJqdW5nbGUiKQ0KCQlTZXR0aW5ncy5qdW5nbGU6YWRkUGFyYW0oImp1bmdsZUtleSIsICJPcm1hbiBUZW1pemxlbWUiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgR2V0S2V5KCJWIikpDQoJCVNldHRpbmdzLmp1bmdsZTphZGRQYXJhbSgianVuZ2xlUSIsICJPcm1hbiBUZW1pemxlcmtlbiAiLi5Ta2lsbFEubmFtZS4uIiAoUSkgS3VsbGFuIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5qdW5nbGU6YWRkUGFyYW0oImp1bmdsZU1hbmEiLCAiTWluaW11bSBNYW5hOiAiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAwLCAxMDAsIDApDQoJCVNldHRpbmdzLmp1bmdsZTpwZXJtYVNob3coImp1bmdsZUtleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIkNhbG1hIEF5YXJsYXJpIiwgImtzIikNCgkJU2V0dGluZ3Mua3M6YWRkUGFyYW0oImtpbGxTdGVhbCIsICJLbGFzaWsgS2lsbCBDYWxtYSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3Mua3M6YWRkUGFyYW0oInNlcCIsICIgIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKQ0KCQlTZXR0aW5ncy5rczphZGRQYXJhbSgia3NRIiwgIkt1bGxhbiAiLi5Ta2lsbFEubmFtZS4uIiAoUSkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmtzOmFkZFBhcmFtKCJrc1ciLCAiS3VsbGFuICIuLlNraWxsVy5uYW1lLi4iIChXKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3Mua3M6YWRkUGFyYW0oImtzUiIsICJLdWxsYW4gIi4uU2tpbGxSLm5hbWUuLiIgKFIpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5rczphZGRQYXJhbSgia3NScmFuZ2UiLCAiIi4uU2tpbGxSLm5hbWUuLiIgKFIpIE1lbnppbCIsIFNDUklQVF9QQVJBTV9TTElDRSwgMjAwMDAsIDU1MCwgMjAwMDAsIDApDQoJCVNldHRpbmdzLmtzOmFkZFBhcmFtKCJzZXAyIiwgIiAiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpDQoJCVNldHRpbmdzLmtzOmFkZFBhcmFtKCJhdXRvSWduaXRlIiwgIk90byBUdXR1c3R1ciIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3Mua3M6cGVybWFTaG93KCJraWxsU3RlYWwiKQ0KDQoJU2V0dGluZ3M6YWRkU3ViTWVudSgiQ2l6aW1sZXIiLCAiZHJhd2luZyIpCQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFBhcmFtKCJtRHJhdyIsICJCdXR1biBDaXppbWxlcmkgRGV2cmUgRGlzaSBCaXJhayIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIlRhcmdldCIsICJEcmF3IENpcmNsZSBvbiBUYXJnZXQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIlRleHQiLCAiRHJhdyBUZXh0IG9uIFRhcmdldCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgibXlIZXJvIiwgIkJlbmltIE1lbnppbGltaSBDaXoiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIm15Q29sb3IiLCAiQmVuaW0gTWVuemlsaW1pbiBSZW5naSIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oInFEcmF3IiwgIkRyYXcgIi4uU2tpbGxRLm5hbWUuLiIgKFEpIE1lbnppbGkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oInFDb2xvciIsICJEcmF3ICIuLlNraWxsUS5uYW1lLi4iIChRKSBSZW5naSIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIndEcmF3IiwgIkRyYXcgIi4uU2tpbGxXLm5hbWUuLiIgKFcpIE1lbnppbGkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIndDb2xvciIsICJEcmF3ICIuLlNraWxsVy5uYW1lLi4iIChXKSBSZW5naSIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oImVEcmF3IiwgIkRyYXcgIi4uU2tpbGxFLm5hbWUuLiIgKEUpIE1lbnppbGkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oImVDb2xvciIsICJEcmF3ICIuLlNraWxsRS5uYW1lLi4iIChFKSBSZW5naSIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pDQoJCQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFN1Yk1lbnUoIkxhZyBGcmVlIENpcmNsZXMiLCAibGZjIikJDQoJCQlTZXR0aW5ncy5kcmF3aW5nLmxmYzphZGRQYXJhbSgibGZjIiwgIkxhZyBGcmVlIENpcmNsZXMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCQkJU2V0dGluZ3MuZHJhd2luZy5sZmM6YWRkUGFyYW0oIkNMIiwgIlF1YWxpdHkiLCA0LCA3NSwgNzUsIDIwMDAsIDApDQoJCQlTZXR0aW5ncy5kcmF3aW5nLmxmYzphZGRQYXJhbSgiV2lkdGgiLCAiV2lkdGgiLCA0LCAxLCAxLCAxMCwgMCkNCgkNCglTZXR0aW5nczphZGRTdWJNZW51KCJEaWdlciBBeWFybGFyIiwgIm1pc2MiKQ0KCQlTZXR0aW5ncy5taXNjOmFkZFBhcmFtKCJwcmVkaWN0aW9uIiwgIlByZWRpY3Rpb24gU2VjaW5peiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7ICJWUHJlZGljdGlvbiIsICJQcm9kaWN0aW9uIiB9KQ0KDQoJDQoJU2V0dGluZ3M6YWRkU3ViTWVudSgiT3Jid2Fsa2luZyBBeWFybGFyaSIsICJPcmJ3YWxraW5nIikNCgkJU3hPcmI6TG9hZFRvTWVudShTZXR0aW5ncy5PcmJ3YWxraW5nKQ0KCQkNCglTZXR0aW5nczphZGRTdWJNZW51KCJCYXNlIFVsdCIsICJCYXNlVWx0IikNCgkJU2V0dGluZ3MuQmFzZVVsdDphZGRQYXJhbSgiZWtsZW5lY2VrIiwgIllha2luZGEgRWtsZW5lY2VrIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkNCglUYXJnZXRTZWxlY3RvciA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1QsIFNraWxsUS5yYW5nZSwgREFNQUdFX1BIWVNJQ0FMLCB0cnVlKQ0KCVRhcmdldFNlbGVjdG9yLm5hbWUgPSAiRXpyZWFsIg0KCVNldHRpbmdzOmFkZFRTKFRhcmdldFNlbGVjdG9yKQ0KZW5kDQoNCmZ1bmN0aW9uIFZhcmlhYmxlcygpDQoJU2tpbGxRID0geyBuYW1lID0gIkdpemVtbGkgQXRpcyIsIHJhbmdlID0gMTE1MCwgZGVsYXkgPSAwLjI1LCBzcGVlZCA9IDIwMDAsIHdpZHRoID0gNjAsIHJlYWR5ID0gZmFsc2UgfQ0KCVNraWxsVyA9IHsgbmFtZSA9ICJPenV0IEFraXNpIiwgcmFuZ2UgPSAxMDAwLCBkZWxheSA9IDAuMjUsIHNwZWVkID0gMTYwMCwgd2lkdGggPSA4MCwgcmVhZHkgPSBmYWxzZSB9DQoJU2tpbGxFID0geyBuYW1lID0gIlNpaGlyIEdlY2lzaSIsIHJhbmdlID0gNDc1LCBkZWxheSA9IG5pbCwgc3BlZWQgPSBuaWwsIHdpZHRoID0gbmlsLCByZWFkeSA9IGZhbHNlIH0NCglTa2lsbFIgPSB7IG5hbWUgPSAiSXNhYmV0IERhbGdhc2kiLCByYW5nZSA9IG1hdGguaHVnZSwgZGVsYXkgPSAxLjAsIHNwZWVkID0gMjAwMCwgd2lkdGggPSAxNjAsIHJlYWR5ID0gZmFsc2UgfQ0KCUlnbml0ZSA9IHsgbmFtZSA9ICJzdW1tb25lcmRvdCIsIHJhbmdlID0gNjAwLCBzbG90ID0gbmlsIH0NCgkNCgllbmVteU1pbmlvbnMgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgU2tpbGxRLnJhbmdlLCBteUhlcm8sIE1JTklPTl9TT1JUX0hFQUxUSF9BU0MpDQoJDQoJVlAgPSBWUHJlZGljdGlvbigpDQoJDQoJSnVuZ2xlTW9icyA9IHt9DQoJSnVuZ2xlRm9jdXNNb2JzID0ge30NCgkNCglpZiBHZXRHYW1lKCkubWFwLnNob3J0TmFtZSA9PSAidHdpc3RlZFRyZWVsaW5lIiB0aGVuDQoJCVR3aXN0ZWRUcmVlbGluZSA9IHRydWUgDQoJZWxzZQ0KCQlUd2lzdGVkVHJlZWxpbmUgPSBmYWxzZQ0KCWVuZA0KCQ0KCV9HLm9sZERyYXdDaXJjbGUgPSByYXdnZXQoX0csICdEcmF3Q2lyY2xlJykNCglfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTIJDQoJDQoJcHJpb3JpdHlUYWJsZSA9IHsNCgkJCUFQID0gew0KCQkJCSJBbm5pZSIsICJBaHJpIiwgIkFrYWxpIiwgIkFuaXZpYSIsICJBbm5pZSIsICJCcmFuZCIsICJDYXNzaW9wZWlhIiwgIkRpYW5hIiwgIkV2ZWx5bm4iLCAiRmlkZGxlU3RpY2tzIiwgIkZpenoiLCAiR3JhZ2FzIiwgIkhlaW1lcmRpbmdlciIsICJLYXJ0aHVzIiwNCgkJCQkiS2Fzc2FkaW4iLCAiS2F0YXJpbmEiLCAiS2F5bGUiLCAiS2VubmVuIiwgIkxlYmxhbmMiLCAiTGlzc2FuZHJhIiwgIkx1eCIsICJNYWx6YWhhciIsICJNb3JkZWthaXNlciIsICJNb3JnYW5hIiwgIk5pZGFsZWUiLCAiT3JpYW5uYSIsDQoJCQkJIlJ5emUiLCAiU2lvbiIsICJTd2FpbiIsICJTeW5kcmEiLCAiVGVlbW8iLCAiVHdpc3RlZEZhdGUiLCAiVmVpZ2FyIiwgIlZpa3RvciIsICJWbGFkaW1pciIsICJYZXJhdGgiLCAiWmlnZ3MiLCAiWnlyYSIsICJWZWxrb3oiDQoJCQl9LA0KCQkJDQoJCQlTdXBwb3J0ID0gew0KCQkJCSJBbGlzdGFyIiwgIkJsaXR6Y3JhbmsiLCAiSmFubmEiLCAiS2FybWEiLCAiTGVvbmEiLCAiTHVsdSIsICJOYW1pIiwgIk51bnUiLCAiU29uYSIsICJTb3Jha2EiLCAiVGFyaWMiLCAiVGhyZXNoIiwgIlppbGVhbiIsICJCcmF1bSINCgkJCX0sDQoJCQkNCgkJCVRhbmsgPSB7DQoJCQkJIkFtdW11IiwgIkNob2dhdGgiLCAiRHJNdW5kbyIsICJHYWxpbyIsICJIZWNhcmltIiwgIk1hbHBoaXRlIiwgIk1hb2thaSIsICJOYXN1cyIsICJSYW1tdXMiLCAiU2VqdWFuaSIsICJOYXV0aWx1cyIsICJTaGVuIiwgIlNpbmdlZCIsICJTa2FybmVyIiwgIlZvbGliZWFyIiwNCgkJCQkiV2Fyd2ljayIsICJZb3JpY2siLCAiWmFjIg0KCQkJfSwNCgkJCQ0KCQkJQURfQ2FycnkgPSB7DQoJCQkJIkFzaGUiLCAiQ2FpdGx5biIsICJDb3JraSIsICJEcmF2ZW4iLCAiRXpyZWFsIiwgIkdyYXZlcyIsICJKYXljZSIsICJKaW54IiwgIktvZ01hdyIsICJMdWNpYW4iLCAiTWFzdGVyWWkiLCAiTWlzc0ZvcnR1bmUiLCAiUGFudGhlb24iLCAiUXVpbm4iLCAiU2hhY28iLCAiU2l2aXIiLA0KCQkJCSJUYWxvbiIsIlRyeW5kYW1lcmUiLCAiVHJpc3RhbmEiLCAiVHdpdGNoIiwgIlVyZ290IiwgIlZhcnVzIiwgIlZheW5lIiwgIllhc3VvIiwgIlplZCINCgkJCX0sDQoJCQkNCgkJCUJydWlzZXIgPSB7DQoJCQkJIkFhdHJveCIsICJEYXJpdXMiLCAiRWxpc2UiLCAiRmlvcmEiLCAiR2FuZ3BsYW5rIiwgIkdhcmVuIiwgIklyZWxpYSIsICJKYXJ2YW5JViIsICJKYXgiLCAiS2hheml4IiwgIkxlZVNpbiIsICJOb2N0dXJuZSIsICJPbGFmIiwgIlBvcHB5IiwNCgkJCQkiUmVuZWt0b24iLCAiUmVuZ2FyIiwgIlJpdmVuIiwgIlJ1bWJsZSIsICJTaHl2YW5hIiwgIlRydW5kbGUiLCAiVWR5ciIsICJWaSIsICJNb25rZXlLaW5nIiwgIlhpblpoYW8iDQoJCQl9DQoJfQ0KDQoJSXRlbXMgPSB7DQoJCUJSSyA9IHsgaWQgPSAzMTUzLCByYW5nZSA9IDQ1MCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LA0KCQlCV0MgPSB7IGlkID0gMzE0NCwgcmFuZ2UgPSA0MDAsIHJlcVRhcmdldCA9IHRydWUsIHNsb3QgPSBuaWwgfSwNCgkJREZHID0geyBpZCA9IDMxMjgsIHJhbmdlID0gNzUwLCByZXFUYXJnZXQgPSB0cnVlLCBzbG90ID0gbmlsIH0sDQoJCUhHQiA9IHsgaWQgPSAzMTQ2LCByYW5nZSA9IDQwMCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LA0KCQlSU0ggPSB7IGlkID0gMzA3NCwgcmFuZ2UgPSAzNTAsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0sDQoJCVNURCA9IHsgaWQgPSAzMTMxLCByYW5nZSA9IDM1MCwgcmVxVGFyZ2V0ID0gZmFsc2UsIHNsb3QgPSBuaWwgfSwNCgkJVE1UID0geyBpZCA9IDMwNzcsIHJhbmdlID0gMzUwLCByZXFUYXJnZXQgPSBmYWxzZSwgc2xvdCA9IG5pbCB9LA0KCQlZR0IgPSB7IGlkID0gMzE0MiwgcmFuZ2UgPSAzNTAsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0sDQoJCUJGVCA9IHsgaWQgPSAzMTg4LCByYW5nZSA9IDc1MCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LA0KCQlSTkQgPSB7IGlkID0gMzE0MywgcmFuZ2UgPSAyNzUsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0NCgl9DQoJDQoJaWYgbm90IFR3aXN0ZWRUcmVlbGluZSB0aGVuDQoJCUp1bmdsZU1vYk5hbWVzID0geyANCgkJCVsiU1JVX011cmt3b2xmTWluaTIuMS4zIl0JPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGZNaW5pMi4xLjIiXQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sZk1pbmk4LjEuMyJdCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xmTWluaTguMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZU1pbmkxLjEuMiJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTcuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWVNaW5pMjEuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWVNaW5pMjcuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmkxMC4xLjIiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkTWluaTEwLjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9SZWRNaW5pNC4xLjIiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkTWluaTQuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0tydWdNaW5pMTEuMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0tydWdNaW5pNS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTkuMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTkuMS4zIl0JPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTkuMS40Il0JPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTMuMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTMuMS4zIl0JPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrTWluaTMuMS40Il0JPSB0cnVlDQoJCX0NCgkJDQoJCUZvY3VzSnVuZ2xlTmFtZXMgPSB7DQoJCQlbIlNSVV9CbHVlMS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWU3LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGYyLjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sZjguMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX0dyb21wMTMuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9Hcm9tcDE0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTcnVfQ3JhYjE2LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTcnVfQ3JhYjE1LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkMTAuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9SZWQ0LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1ZzExLjEuMiJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfS3J1ZzUuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWs5LjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9SYXpvcmJlYWszLjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9EcmFnb242LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfQmFyb24xMi4xLjEiXQkJCT0gdHJ1ZQ0KCQl9DQoJZWxzZQ0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkJWyJUVF9OV3JhaXRoMS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTkdvbGVtMi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGYzLjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJUVF9OV3JhaXRoNC4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTkdvbGVtNS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGY2LjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJUVF9TcGlkZXJib3NzOC4xLjEiXQkJPSB0cnVlDQoJCX0JCQ0KCQlKdW5nbGVNb2JOYW1lcyA9IHsNCgkJCVsiVFRfTldyYWl0aDIxLjEuMiJdCQk9IHRydWUsDQoJCQlbIlRUX05XcmFpdGgyMS4xLjMiXQkJPSB0cnVlLA0KCQkJWyJUVF9OR29sZW0yMi4xLjIiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGYyMy4xLjIiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGYyMy4xLjMiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldyYWl0aDI0LjEuMiJdCQk9IHRydWUsDQoJCQlbIlRUX05XcmFpdGgyNC4xLjMiXQkJPSB0cnVlLA0KCQkJWyJUVF9OR29sZW0yNS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGYyNi4xLjIiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldvbGYyNi4xLjMiXQkJCT0gdHJ1ZQ0KCQl9DQoJZW5kDQoJCQ0KCWZvciBpID0gMCwgb2JqTWFuYWdlci5tYXhPYmplY3RzIGRvDQoJCWxvY2FsIG9iamVjdCA9IG9iak1hbmFnZXI6Z2V0T2JqZWN0KGkpDQoJCWlmIG9iamVjdCBhbmQgb2JqZWN0LnZhbGlkIGFuZCBub3Qgb2JqZWN0LmRlYWQgdGhlbg0KCQkJaWYgRm9jdXNKdW5nbGVOYW1lc1tvYmplY3QubmFtZV0gdGhlbg0KCQkJCUp1bmdsZUZvY3VzTW9ic1sjSnVuZ2xlRm9jdXNNb2JzKzFdID0gb2JqZWN0DQoJCQllbHNlaWYgSnVuZ2xlTW9iTmFtZXNbb2JqZWN0Lm5hbWVdIHRoZW4NCgkJCQlKdW5nbGVNb2JzWyNKdW5nbGVNb2JzKzFdID0gb2JqZWN0DQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gU2V0UHJpb3JpdHkodGFibGUsIGhlcm8sIHByaW9yaXR5KQ0KCWZvciBpPTEsICN0YWJsZSwgMSBkbw0KCQlpZiBoZXJvLmNoYXJOYW1lOmZpbmQodGFibGVbaV0pIH49IG5pbCB0aGVuDQoJCQlUU19TZXRIZXJvUHJpb3JpdHkocHJpb3JpdHksIGhlcm8uY2hhck5hbWUpDQoJCWVuZA0KCWVuZA0KZW5kDQogDQpmdW5jdGlvbiBhcnJhbmdlUHJpb3JpdHlzKCkNCgkJZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFEX0NhcnJ5LCBlbmVteSwgMSkNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BUCwJICAgZW5lbXksIDIpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuU3VwcG9ydCwgIGVuZW15LCAzKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkJydWlzZXIsICBlbmVteSwgNCkNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5UYW5rLAkgZW5lbXksIDUpDQoJCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIGFycmFuZ2VQcmlvcml0eXNUVCgpDQogICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BRF9DYXJyeSwgZW5lbXksIDEpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQVAsICAgICAgIGVuZW15LCAxKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlN1cHBvcnQsICBlbmVteSwgMikNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5CcnVpc2VyLCAgZW5lbXksIDIpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuVGFuaywgICAgIGVuZW15LCAzKQ0KICAgICAgICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBVc2VJdGVtcyh1bml0KQ0KCWlmIHVuaXQgfj0gbmlsIHRoZW4NCgkJZm9yIF8sIGl0ZW0gaW4gcGFpcnMoSXRlbXMpIGRvDQoJCQlpdGVtLnNsb3QgPSBHZXRJbnZlbnRvcnlTbG90SXRlbShpdGVtLmlkKQ0KCQkJaWYgaXRlbS5zbG90IH49IG5pbCB0aGVuDQoJCQkJaWYgaXRlbS5yZXFUYXJnZXQgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgaXRlbS5yYW5nZSB0aGVuDQoJCQkJCUNhc3RTcGVsbChpdGVtLnNsb3QsIHVuaXQpDQoJCQkJZWxzZWlmIG5vdCBpdGVtLnJlcVRhcmdldCB0aGVuDQoJCQkJCWlmIChHZXREaXN0YW5jZSh1bml0KSAtIGdldEhpdEJveFJhZGl1cyhteUhlcm8pIC0gZ2V0SGl0Qm94UmFkaXVzKHVuaXQpKSA8IDUwIHRoZW4NCgkJCQkJCUNhc3RTcGVsbChpdGVtLnNsb3QpDQoJCQkJCWVuZA0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIGdldEhpdEJveFJhZGl1cyh0YXJnZXQpDQoJcmV0dXJuIEdldERpc3RhbmNlKHRhcmdldC5taW5CQm94LCB0YXJnZXQubWF4QkJveCkvMg0KZW5kDQoNCmZ1bmN0aW9uIFByaW9yaXR5T25Mb2FkKCkNCglpZiBoZXJvTWFuYWdlci5pQ291bnQgPCAxMCBvciAoVHdpc3RlZFRyZWVsaW5lIGFuZCBoZXJvTWFuYWdlci5pQ291bnQgPCA2KSB0aGVuDQoJCXByaW50KCI8Yj48Zm9udCBjb2xvcj1cIiM2Njk5RkZcIj5CRVRBOjwvZm9udD48L2I+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiA8L2ZvbnQ+IikNCgllbHNlaWYgaGVyb01hbmFnZXIuaUNvdW50ID09IDYgdGhlbg0KCQlhcnJhbmdlUHJpb3JpdHlzVFQoKQ0KICAgIGVsc2UNCgkJYXJyYW5nZVByaW9yaXR5cygpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2V0SnVuZ2xlTW9iKCkNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCBTa2lsbFEucmFuZ2UpIHRoZW4gcmV0dXJuIE1vYiBlbmQNCgllbmQNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZU1vYnMpIGRvDQoJCWlmIFZhbGlkVGFyZ2V0KE1vYiwgU2tpbGxRLnJhbmdlKSB0aGVuIHJldHVybiBNb2IgZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25DcmVhdGVPYmoob2JqKQ0KCWlmIG9iai52YWxpZCB0aGVuDQoJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqLm5hbWVdIHRoZW4NCgkJCUp1bmdsZUZvY3VzTW9ic1sjSnVuZ2xlRm9jdXNNb2JzKzFdID0gb2JqDQoJCWVsc2VpZiBKdW5nbGVNb2JOYW1lc1tvYmoubmFtZV0gdGhlbg0KCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iag0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmopDQoJZm9yIGksIE1vYiBpbiBwYWlycyhKdW5nbGVNb2JzKSBkbw0KCQlpZiBvYmoubmFtZSA9PSBNb2IubmFtZSB0aGVuDQoJCQl0YWJsZS5yZW1vdmUoSnVuZ2xlTW9icywgaSkNCgkJZW5kDQoJZW5kDQoJZm9yIGksIE1vYiBpbiBwYWlycyhKdW5nbGVGb2N1c01vYnMpIGRvDQoJCWlmIG9iai5uYW1lID09IE1vYi5uYW1lIHRoZW4NCgkJCXRhYmxlLnJlbW92ZShKdW5nbGVGb2N1c01vYnMsIGkpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFRydWVSYW5nZSgpDQoJcmV0dXJuIG15SGVyby5yYW5nZSArIEdldERpc3RhbmNlKG15SGVybywgbXlIZXJvLm1pbkJCb3gpDQplbmQNCg0KZnVuY3Rpb24gR2V0Q3VzdG9tVGFyZ2V0KCkNCiAJVGFyZ2V0U2VsZWN0b3I6dXBkYXRlKCkgCQ0KCWlmIF9HLk1NQV9UYXJnZXQgYW5kIF9HLk1NQV9UYXJnZXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuIHJldHVybiBfRy5NTUFfVGFyZ2V0IGVuZA0KCWlmIF9HLkF1dG9DYXJyeSBhbmQgX0cuQXV0b0NhcnJ5LkNyb3NzaGFpciBhbmQgX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIgYW5kIF9HLkF1dG9DYXJyeS5BdHRhY2tfQ3Jvc3NoYWlyLnRhcmdldCBhbmQgX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbiByZXR1cm4gX0cuQXV0b0NhcnJ5LkF0dGFja19Dcm9zc2hhaXIudGFyZ2V0IGVuZA0KCXJldHVybiBUYXJnZXRTZWxlY3Rvci50YXJnZXQNCmVuZA0KDQpmdW5jdGlvbiBEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIHdpZHRoLCBjb2xvciwgY2hvcmRsZW5ndGgpDQogIHJhZGl1cyA9IHJhZGl1cyBvciAzMDANCiAgcXVhbGl0eSA9IG1hdGgubWF4KDgscm91bmQoMTgwL21hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoLygyKnJhZGl1cykpKSkpKSkNCiAgcXVhbGl0eSA9IDIgKiBtYXRoLnBpIC8gcXVhbGl0eQ0KICByYWRpdXMgPSByYWRpdXMqLjkyDQogIA0KICBsb2NhbCBwb2ludHMgPSB7fQ0KICBmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIHF1YWxpdHksIHF1YWxpdHkgZG8NCiAgICBsb2NhbCBjID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh4ICsgcmFkaXVzICogbWF0aC5jb3ModGhldGEpLCB5LCB6IC0gcmFkaXVzICogbWF0aC5zaW4odGhldGEpKSkNCiAgICBwb2ludHNbI3BvaW50cyArIDFdID0gRDNEWFZFQ1RPUjIoYy54LCBjLnkpDQogIGVuZA0KICANCiAgRHJhd0xpbmVzMihwb2ludHMsIHdpZHRoIG9yIDEsIGNvbG9yIG9yIDQyOTQ5NjcyOTUpDQplbmQNCg0KZnVuY3Rpb24gcm91bmQobnVtKSANCiAgaWYgbnVtID49IDAgdGhlbiByZXR1cm4gbWF0aC5mbG9vcihudW0rLjUpIGVsc2UgcmV0dXJuIG1hdGguY2VpbChudW0tLjUpIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIERyYXdDaXJjbGUyKHgsIHksIHosIHJhZGl1cywgY29sb3IpDQogIGxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopDQogIGxvY2FsIHZQb3MyID0gVmVjdG9yKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnopDQogIGxvY2FsIHRQb3MgPSB2UG9zMSAtICh2UG9zMSAtIHZQb3MyKTpub3JtYWxpemVkKCkgKiByYWRpdXMNCiAgbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpDQogIA0KICBpZiBPblNjcmVlbih7IHggPSBzUG9zLngsIHkgPSBzUG9zLnkgfSwgeyB4ID0gc1Bvcy54LCB5ID0gc1Bvcy55IH0pIHRoZW4NCiAgICBEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIFNldHRpbmdzLmRyYXdpbmcubGZjLldpZHRoLCBjb2xvciwgU2V0dGluZ3MuZHJhd2luZy5sZmMuQ0wpIA0KICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBTZXRSUmFuZ2UoKQ0KCWlmIFNraWxsUi5yZWFkeSB0aGVuDQoJCVNraWxsUi5yYW5nZSA9IFNldHRpbmdzLmtzLmtzUnJhbmdlDQoJZW5kDQplbmQNCmVuZA0KDQppZiBteUhlcm8uY2hhck5hbWUgPT0gIkdyYXZlcyIgdGhlbg0KDQpsb2NhbCB0cyA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEwMDAsIERBTUFHRV9QSFlTSUNBTCkNCmxvY2FsIHJ0cyA9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDIwMDAsIERBTUFHRV9QSFlTSUNBTCkNCmxvY2FsIHFEZWxheSwgcVdpZHRoLCBxUmFuZ2UsIHFTcGVlZCA9IDAuMjUsIDI1Km1hdGgucGkvMTgwLCA5NTAsIDIwMDANCmxvY2FsIHdEZWxheSwgd1dpZHRoLCB3UmFuZ2UsIHdTcGVlZCA9IDAuMjUsIDI1MCwgOTUwLCAxNjUwDQpsb2NhbCByRGVsYXksIHJXaWR0aCwgclJhbmdlLCByU3BlZWQgPSAwLjI1LCAxMDAsIDEwMDAsIDIxMDANCmxvY2FsIFZQID0gVlByZWRpY3Rpb24oKQ0KDQpmdW5jdGlvbiBPbkxvYWQoKQ0KCVByaW50Q2hhdCgiPGZvbnQgY29sb3I9XCIjRkZGRjAwXCI+R3JhdmVzIEJldGEgPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+Q2VudGlsbWVuNTAiKQ0KCU1lbnUoKQ0KZW5kDQoNCmZ1bmN0aW9uIE1lbnUoKQ0KCUNvbmZpZyA9IHNjcmlwdENvbmZpZygiR3JhdmVzIEJFVEEiLCAiQ2VudGlsbWVuNTBzIikNCgkNCglDb25maWc6YWRkU3ViTWVudSgiS29tYm8gQXlhcmxhcmkiLCAiY29tYm8iKQ0KCQlDb25maWcuY29tYm86YWRkUGFyYW0oInVzZXEiLCAiS29tYm9kYSBRIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2V3IiwgIktvbWJvZGEgVyBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlZSIsICJLb21ib2RhIEUgS3VsbGFuIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlDb25maWcuY29tYm86YWRkUGFyYW0oInVzZXIiLCAiVWx0aSBJbGUgS2lsbCBDYWwiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCUNvbmZpZy5jb21ibzphZGRQYXJhbSgiZnVsbGNvbWJvIiwgIktvbWJvIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCIgIikpDQoJCQ0KCUNvbmZpZzphZGRTdWJNZW51KCJJdGVtbGVyIiwgIml0ZW1zIikNCgkJQ29uZmlnLml0ZW1zOmFkZFBhcmFtKCJiaWxnZXdhdGVyIiwgIkJpbGdld2F0ZXIgUGFsYXNpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlDb25maWcuaXRlbXM6YWRkUGFyYW0oImJvdHJrIiwgIk1haHZvbG11cyBLcmFsaW4gS2lsaWNpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlDb25maWcuaXRlbXM6YWRkUGFyYW0oInlvdW11dXMiLCAiWW91bXUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCQ0KCUNvbmZpZzphZGRTdWJNZW51KCJDaXppbWxlciIsICJkcmF3aW5nIikNCgkJQ29uZmlnLmRyYXdpbmc6YWRkUGFyYW0oImRyYXdxdyIsICJRICsgVyBNZW56aWxpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlDb25maWcuZHJhd2luZzphZGRQYXJhbSgiZHJhd2UiLCAiRSBNZW56aWxpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlDb25maWcuZHJhd2luZzphZGRQYXJhbSgiZHJhd3IiLCAiUiBNZW56aWxpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQkNCglDb25maWc6YWRkU3ViTWVudSgiT3Jid2Fsa2luZyIsICJTeE9yYldhbGsiKQ0KCQlTeE9yYjpMb2FkVG9NZW51KENvbmZpZy5TeE9yYldhbGspDQplbmQNCg0KZnVuY3Rpb24gT25UaWNrKCkNCgl0czp1cGRhdGUoKQ0KCXJ0czp1cGRhdGUoKQ0KCVNwZWxscygpDQoJQmlsZ2VXYXRlcigpDQoJQm90cmsoKQ0KCVlvdW11dXMoKQ0KZW5kDQoNCmZ1bmN0aW9uIFNwZWxscygpDQoJDQoJaWYgKENvbmZpZy5jb21iby5mdWxsY29tYm8pIGFuZCAoQ29uZmlnLmNvbWJvLnVzZXEpIHRoZW4NCgkJaWYgVmFsaWRUYXJnZXQodHMudGFyZ2V0LCA5NTApIHRoZW4NCgkJCWlmIChteUhlcm86Q2FuVXNlU3BlbGwoX1EpID09IFJFQURZKSB0aGVuDQoJCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0Q29uZUFPRUNhc3RQb3NpdGlvbih0cy50YXJnZXQsIHFEZWxheSwgcVdpZHRoLCBxUmFuZ2UtMjAsIHFTcGVlZCwgbXlIZXJvKQ0KCQkJCWlmIENhc3RQb3NpdGlvbiBhbmQgSGl0Q2hhbmNlID49IDIgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX1EsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCgkJDQoJaWYgKENvbmZpZy5jb21iby5mdWxsY29tYm8pIGFuZCAoQ29uZmlnLmNvbWJvLnVzZXcpIHRoZW4NCgkJaWYgVmFsaWRUYXJnZXQodHMudGFyZ2V0LCA5NTApIHRoZW4NCgkJCWlmIChteUhlcm86Q2FuVXNlU3BlbGwoX1cpID09IFJFQURZKSB0aGVuDQoJCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCBIaXRDaGFuY2UsIFBvc2l0aW9uID0gVlA6R2V0Q2lyY3VsYXJBT0VDYXN0UG9zaXRpb24odHMudGFyZ2V0LCB3RGVsYXksIHdXaWR0aCwgd1JhbmdlLCB3U3BlZWQsIG15SGVybykNCgkJCQlpZiBDYXN0UG9zaXRpb24gYW5kIEhpdENoYW5jZSA+PSAyICB0aGVuDQoJCQkJCUNhc3RTcGVsbChfVywgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KCQkNCglpZiAoQ29uZmlnLmNvbWJvLmZ1bGxjb21ibykgYW5kIChDb25maWcuY29tYm8udXNlZSkgdGhlbg0KCQlpZiBWYWxpZFRhcmdldCh0cy50YXJnZXQsIG15SGVyby5yYW5nZSArIDQyNSkgdGhlbg0KCQkJaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpIHRoZW4NCgkJCQlDYXN0U3BlbGwoX0UsIG1vdXNlUG9zLngsIG1vdXNlUG9zLnopDQoJCQllbmQNCgkJZW5kDQoJZW5kDQoNCglpZiBDb25maWcuY29tYm8udXNlciB0aGVuDQoJCWlmIFZhbGlkVGFyZ2V0KHJ0cy50YXJnZXQsIDIwMDApIGFuZCBnZXREbWcoIlIiLCBydHMudGFyZ2V0LCBteUhlcm8pID4gcnRzLnRhcmdldC5oZWFsdGggdGhlbg0KCQkJaWYgbXlIZXJvOkNhblVzZVNwZWxsKF9SKSA9PSBSRUFEWSB0aGVuDQoJCQkJbG9jYWwgQ2FzdFBvc2l0aW9uLCAgSGl0Q2hhbmNlLCAgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHRzLnRhcmdldCwgckRlbGF5LCByV2lkdGgsIHJSYW5nZSwgclNwZWVkLCBteUhlcm8pDQoJCQkJaWYgQ2FzdFBvc2l0aW9uIGFuZCBIaXRDaGFuY2UgPj0gMiB0aGVuDQoJCQkJCUNhc3RTcGVsbChfUiwgQ2FzdFBvc2l0aW9uLngsIENhc3RQb3NpdGlvbi56KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEJpbGdlV2F0ZXIoKQ0KCWlmIChDb25maWcuY29tYm8uZnVsbGNvbWJvKSBhbmQgKENvbmZpZy5pdGVtcy5iaWxnZXdhdGVyKSB0aGVuDQoJCWlmIFZhbGlkVGFyZ2V0KHRzLnRhcmdldCwgNDUwKSB0aGVuDQoJCQlpZiAoR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE0NCkgfj0gbmlsKSB0aGVuDQoJCQkJaWYgKG15SGVybzpDYW5Vc2VTcGVsbChHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTQ0KSkgPT0gUkVBRFkpIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKEdldEludmVudG9yeVNsb3RJdGVtKDMxNDQpLCB0cy50YXJnZXQpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQm90cmsoKQ0KCWlmIChDb25maWcuY29tYm8uZnVsbGNvbWJvKSBhbmQgKENvbmZpZy5pdGVtcy5ib3RyaykgdGhlbg0KCQlpZiBWYWxpZFRhcmdldCh0cy50YXJnZXQsIDQ1MCkgdGhlbg0KCQkJaWYgKEdldEludmVudG9yeVNsb3RJdGVtKDMxNTMpIH49IG5pbCkgdGhlbg0KCQkJCWlmIChteUhlcm86Q2FuVXNlU3BlbGwoR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE1MykpID09IFJFQURZKSB0aGVuDQoJCQkJCUNhc3RTcGVsbChHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTUzKSwgdHMudGFyZ2V0KQ0KCQkJCWVuZA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFlvdW11dXMoKQ0KCWlmIChDb25maWcuY29tYm8uZnVsbGNvbWJvKSBhbmQgKENvbmZpZy5pdGVtcy55b3VtdXVzKSB0aGVuDQoJCWlmIFZhbGlkVGFyZ2V0KHRzLnRhcmdldCwgNjUwKSB0aGVuDQoJCQlpZiAoR2V0SW52ZW50b3J5U2xvdEl0ZW0oMzE0Mikgfj0gbmlsKSB0aGVuDQoJCQkJaWYgKG15SGVybzpDYW5Vc2VTcGVsbChHZXRJbnZlbnRvcnlTbG90SXRlbSgzMTQyKSkgPT0gUkVBRFkpIHRoZW4NCgkJCQkJQ2FzdFNwZWxsKEdldEludmVudG9yeVNsb3RJdGVtKDMxNDIpLCB0cy50YXJnZXQpDQoJCQkJZW5kDQoJCQllbmQNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25EcmF3KCkNCglpZiAobXlIZXJvLmRlYWQpIHRoZW4gcmV0dXJuIGVuZA0KCWlmIChDb25maWcuZHJhd2luZy5kcmF3cXcpIHRoZW4NCgkJRHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA5NTAsIFJHQigyMDQsIDAsIDApKQ0KCWVuZA0KCWlmIChDb25maWcuZHJhd2luZy5kcmF3ZSkgdGhlbg0KCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDQyNSwgUkdCKDAsIDIwNCwgMCkpDQoJZW5kDQoJaWYgKENvbmZpZy5kcmF3aW5nLmRyYXdyKSB0aGVuDQoJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTAwMCwgUkdCKDAsIDAsIDIwNCkpDQoJZW5kDQplbmQNCg0KZW5kDQoNCmlmIG15SGVyby5jaGFyTmFtZSA9PSAiQ29ya2kiIHRoZW4NCg0KZnVuY3Rpb24gT25Mb2FkKCkNCglQcmludENoYXQoIjxmb250IGNvbG9yPVwiI0ZGRkYwMFwiPkNvcmtpIEJldGEgPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+Q2VudGlsbWVuNTAiKQ0KCVZhcmlhYmxlcygpDQoJTWVudSgpDQoJUHJpb3JpdHlPbkxvYWQoKQ0KZW5kDQoNCmZ1bmN0aW9uIE9uVGljaygpDQoJQ29tYm9LZXkgPSBTZXR0aW5ncy5jb21iby5jb21ib0tleQ0KCUhhcmFzc0tleSA9IFNldHRpbmdzLmhhcmFzcy5oYXJhc3NLZXkNCglKdW5nbGVDbGVhcktleSA9IFNldHRpbmdzLmp1bmdsZS5qdW5nbGVLZXkNCglMYW5lQ2xlYXJLZXkgPSBTZXR0aW5ncy5sYW5lLmxhbmVLZXkNCgkNCglpZiBDb21ib0tleSB0aGVuDQoJCUNvbWJvKFRhcmdldCkNCgllbmQNCgkNCglpZiBIYXJhc3NLZXkgdGhlbg0KCQlIYXJhc3MoVGFyZ2V0KQ0KCWVuZA0KCQ0KCWlmIEp1bmdsZUNsZWFyS2V5IHRoZW4NCgkJSnVuZ2xlQ2xlYXIoKQ0KCWVuZA0KCQ0KCWlmIExhbmVDbGVhcktleSB0aGVuDQoJCUxhbmVDbGVhcigpDQoJZW5kDQoJDQoJaWYgU2V0dGluZ3Mua3Mua2lsbFN0ZWFsIHRoZW4NCgkJS2lsbFN0ZWFsKCkNCgllbmQNCg0KCUNoZWNrcygpDQplbmQNCg0KZnVuY3Rpb24gT25EcmF3KCkNCglpZiBub3QgbXlIZXJvLmRlYWQgYW5kIG5vdCBTZXR0aW5ncy5kcmF3aW5nLm1EcmF3IHRoZW4NCgkJaWYgU2tpbGxRLnJlYWR5IGFuZCBTZXR0aW5ncy5kcmF3aW5nLnFEcmF3IHRoZW4gDQoJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsUS5yYW5nZSwgUkdCKFNldHRpbmdzLmRyYXdpbmcucUNvbG9yWzJdLCBTZXR0aW5ncy5kcmF3aW5nLnFDb2xvclszXSwgU2V0dGluZ3MuZHJhd2luZy5xQ29sb3JbNF0pKQ0KCQllbmQNCgkJaWYgU2tpbGxXLnJlYWR5IGFuZCBTZXR0aW5ncy5kcmF3aW5nLndEcmF3IHRoZW4gDQoJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsVy5yYW5nZSwgUkdCKFNldHRpbmdzLmRyYXdpbmcud0NvbG9yWzJdLCBTZXR0aW5ncy5kcmF3aW5nLndDb2xvclszXSwgU2V0dGluZ3MuZHJhd2luZy53Q29sb3JbNF0pKQ0KCQllbmQNCgkJaWYgU2tpbGxFLnJlYWR5IGFuZCBTZXR0aW5ncy5kcmF3aW5nLmVEcmF3IHRoZW4gDQoJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsRS5yYW5nZSwgUkdCKFNldHRpbmdzLmRyYXdpbmcuZUNvbG9yWzJdLCBTZXR0aW5ncy5kcmF3aW5nLmVDb2xvclszXSwgU2V0dGluZ3MuZHJhd2luZy5lQ29sb3JbNF0pKQ0KCQllbmQNCgkJaWYgU2tpbGxSLnJlYWR5IGFuZCBTZXR0aW5ncy5kcmF3aW5nLnJEcmF3IHRoZW4gDQoJCQlEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIFNraWxsUi5yYW5nZSwgUkdCKFNldHRpbmdzLmRyYXdpbmcuckNvbG9yWzJdLCBTZXR0aW5ncy5kcmF3aW5nLnJDb2xvclszXSwgU2V0dGluZ3MuZHJhd2luZy5yQ29sb3JbNF0pKQ0KCQllbmQNCgkJDQoJCWlmIFNldHRpbmdzLmRyYXdpbmcubXlIZXJvIHRoZW4NCgkJCURyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgVHJ1ZVJhbmdlKCksIFJHQihTZXR0aW5ncy5kcmF3aW5nLm15Q29sb3JbMl0sIFNldHRpbmdzLmRyYXdpbmcubXlDb2xvclszXSwgU2V0dGluZ3MuZHJhd2luZy5teUNvbG9yWzRdKSkNCgkJZW5kDQoJCQ0KCQlpZiBTZXR0aW5ncy5kcmF3aW5nLlRhcmdldCBhbmQgVGFyZ2V0IH49IG5pbCB0aGVuDQoJCQlEcmF3Q2lyY2xlKFRhcmdldC54LCBUYXJnZXQueSwgVGFyZ2V0LnosIDgwLCBBUkdCKDI1NSwgMTAsIDI1NSwgMTApKQ0KCQllbmQNCgllbmQNCmVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tCQkJIEZ1bmN0aW9ucwkJCQkNCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBDb21ibyh1bml0KQ0KCWlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCB1bml0IH49IG5pbCBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCgkJaWYgU2V0dGluZ3MuY29tYm8uY29tYm9JdGVtcyB0aGVuDQoJCQlVc2VJdGVtcyh1bml0KQ0KCQllbmQNCgkJDQoJCUNhc3RXKHVuaXQpDQoJCUNhc3RRKHVuaXQpDQoJCUNhc3RFKHVuaXQpDQoJCUhhbmRsZVJDYXN0KHVuaXQpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSGFyYXNzKHVuaXQpDQoJaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIHVuaXQgfj0gbmlsIGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIG5vdCBJc015TWFuYUxvdygpIHRoZW4NCgkJaWYgU2V0dGluZ3MuaGFyYXNzLnVzZVEgdGhlbiBDYXN0USh1bml0KSBlbmQNCgkJaWYgU2V0dGluZ3MuaGFyYXNzLnVzZVIgdGhlbiBIYW5kbGVSQ2FzdCh1bml0KSBlbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBMYW5lQ2xlYXIoKQ0KCWVuZW15TWluaW9uczp1cGRhdGUoKQ0KCWlmIExhbmVDbGVhcktleSB0aGVuDQoJCWZvciBpLCBtaW5pb24gaW4gcGFpcnMoZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQoJCQlpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCgkJCQlpZiBTZXR0aW5ncy5sYW5lLmxhbmVRIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IFNraWxsUS5yYW5nZSBhbmQgU2tpbGxRLnJlYWR5IHRoZW4NCgkJCQkJbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihTa2lsbFEucmFuZ2UsIFNraWxsUS53aWR0aCwgZW5lbXlNaW5pb25zLm9iamVjdHMpDQoJCQkJCQlpZiBCZXN0UG9zIH49IG5pbCB0aGVuDQoJCQkJCQkJQ2FzdFNwZWxsKF9RLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCgkJCQkJCWVuZA0KCQkJCWVuZA0KCQkJCQ0KCQkJCWlmIFNldHRpbmdzLmxhbmUubGFuZVIgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gU2tpbGxSLnJhbmdlIGFuZCBTa2lsbFIucmVhZHkgdGhlbg0KCQkJCQlDYXN0U3BlbGwoX1IsIG1pbmlvbi54LCBtaW5pb24ueikNCgkJCQllbmQNCgkJCWVuZAkJIA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBKdW5nbGVDbGVhcigpDQoJaWYgU2V0dGluZ3MuanVuZ2xlLmp1bmdsZUtleSB0aGVuDQoJCWxvY2FsIEp1bmdsZU1vYiA9IEdldEp1bmdsZU1vYigpDQoJCQ0KCQlpZiBKdW5nbGVNb2Igfj0gbmlsIHRoZW4NCgkJCWlmIFNldHRpbmdzLmp1bmdsZS5qdW5nbGVRIGFuZCBHZXREaXN0YW5jZShKdW5nbGVNb2IpIDw9IFNraWxsUS5yYW5nZSBhbmQgU2tpbGxRLnJlYWR5IHRoZW4NCgkJCQlDYXN0U3BlbGwoX1EsIEp1bmdsZU1vYi54LCBKdW5nbGVNb2IueikNCgkJCWVuZA0KCQkJaWYgU2V0dGluZ3MuanVuZ2xlLmp1bmdsZVIgYW5kIEdldERpc3RhbmNlKEp1bmdsZU1vYikgPD0gU2tpbGxSLnJhbmdlIGFuZCBTa2lsbFIucmVhZHkgdGhlbg0KCQkJCUNhc3RTcGVsbChfUiwgSnVuZ2xlTW9iLngsIEp1bmdsZU1vYi56KQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIENhc3RRKHVuaXQpDQoJaWYgdW5pdCB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IFNraWxsUS5yYW5nZSBhbmQgU2tpbGxRLnJlYWR5IHRoZW4NCgkJbG9jYWwgQU9FQ2FzdFBvc2l0aW9uLCBNYWluVGFyZ2V0SGl0Q2hhbmNlLCBuVGFyZ2V0cyA9IFZQOkdldENpcmN1bGFyQU9FQ2FzdFBvc2l0aW9uKHVuaXQsIFNraWxsUS5kZWxheSwgU2tpbGxRLndpZHRoLCBTa2lsbFEucmFuZ2UsIFNraWxsUS5zcGVlZCwgbXlIZXJvKQ0KCQkNCgkJaWYgTWFpblRhcmdldEhpdENoYW5jZSA+PSAyIHRoZW4NCgkJCUNhc3RTcGVsbChfUSwgQU9FQ2FzdFBvc2l0aW9uLngsIEFPRUNhc3RQb3NpdGlvbi56KQ0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0Vyh1bml0KQ0KCWlmIHVuaXQgfj0gbmlsIHRoZW4NCgkJaWYgU2tpbGxXLnJlYWR5IGFuZCBHZXREaXN0YW5jZSh1bml0KSA8PSBTa2lsbFcucmFuZ2UgYW5kIFNldHRpbmdzLmNvbWJvLnVzZVcgPT0gMSB0aGVuDQoJCQlsb2NhbCBNb3VzZSA9IFZlY3RvcihteUhlcm8pICsgNDAwICogKFZlY3Rvcihtb3VzZVBvcykgLSBWZWN0b3IobXlIZXJvKSk6bm9ybWFsaXplZCgpDQoJCQlDYXN0U3BlbGwoX1csIE1vdXNlLngsIE1vdXNlLnopIA0KCQllbHNlaWYgU2tpbGxXLnJlYWR5IGFuZCBHZXREaXN0YW5jZSh1bml0KSA8PSBTa2lsbFcucmFuZ2UgYW5kIFNldHRpbmdzLmNvbWJvLnVzZVcgPT0gMiB0aGVuDQoJCQlDYXN0U3BlbGwoX1csIHVuaXQueCwgdW5pdC56KQ0KCQllbHNlaWYgU2V0dGluZ3MuY29tYm8udXNlVyA9PSAzIHRoZW4NCgkJCXJldHVybg0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBDYXN0RSh1bml0KQ0KCWlmIHVuaXQgfj0gbmlsIGFuZCBTa2lsbEUucmVhZHkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IFNraWxsRS5yYW5nZSB0aGVuDQoJCUNhc3RTcGVsbChfRSwgdW5pdC54LCB1bml0LnopDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gSGFuZGxlUkNhc3QodW5pdCkNCglpZiB1bml0IH49IG5pbCBhbmQgVmFsaWRUYXJnZXQodW5pdCkgdGhlbg0KCQlpZiBUaGVCaWdPbmUgPT0gdHJ1ZSB0aGVuDQoJCQlDYXN0Ul9UQk8odW5pdCkNCgkJZWxzZQ0KCQkJQ2FzdFIodW5pdCkNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2FzdFIodW5pdCkNCglpZiB1bml0IH49IG5pbCBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPD0gU2tpbGxSLnJhbmdlIGFuZCBTa2lsbFIucmVhZHkgdGhlbg0KCQlsb2NhbCBDYXN0UG9zaXRpb24sICBIaXRDaGFuY2UsICBQb3NpdGlvbiA9IFZQOkdldExpbmVDYXN0UG9zaXRpb24odW5pdCwgU2tpbGxSLmRlbGF5LCBTa2lsbFIud2lkdGgsIFNraWxsUi5yYW5nZSwgU2tpbGxSLnNwZWVkLCBteUhlcm8sIHRydWUpDQoJCQ0KCQlpZiBIaXRDaGFuY2UgPj0gMiB0aGVuDQoJCQlDYXN0U3BlbGwoX1IsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gQ2FzdFJfVEJPKHVuaXQpDQoJaWYgdW5pdCB+PSBuaWwgYW5kIEdldERpc3RhbmNlKHVuaXQpIDw9IFNraWxsUi5yYW5nZSBhbmQgU2tpbGxSLnJlYWR5IHRoZW4NCgkJbG9jYWwgQ2FzdFBvc2l0aW9uLCAgSGl0Q2hhbmNlLCAgUG9zaXRpb24gPSBWUDpHZXRMaW5lQ2FzdFBvc2l0aW9uKHVuaXQsIFNraWxsUi5kZWxheSwgU2tpbGxSLndpZHRoKjIsIFNraWxsUi5yYW5nZSwgU2tpbGxSLnNwZWVkLCBteUhlcm8sIHRydWUpDQoJCQ0KCQlpZiBIaXRDaGFuY2UgPj0gMiB0aGVuDQoJCQlDYXN0U3BlbGwoX1IsIENhc3RQb3NpdGlvbi54LCBDYXN0UG9zaXRpb24ueikNCgkJZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gS2lsbFN0ZWFsKCkNCglmb3IgXywgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCWlmIFZhbGlkVGFyZ2V0KGVuZW15KSBhbmQgZW5lbXkudmlzaWJsZSB0aGVuDQoJCQlsb2NhbCBxRG1nID0gZ2V0RG1nKCJRIiwgZW5lbXksIG15SGVybykNCgkJCWxvY2FsIHJEbWcgPSBnZXREbWcoIlIiLCBlbmVteSwgbXlIZXJvKQ0KCQkJDQoJCQlpZiBlbmVteS5oZWFsdGggPD0gcURtZyB0aGVuDQoJCQkJQ2FzdFEoZW5lbXkpDQoJCQllbHNlaWYgZW5lbXkuaGVhbHRoIDw9IChxRG1nICsgckRtZykgYW5kIEdldERpc3RhbmNlKGVuZW15KSA8PSBTa2lsbFEucmFuZ2UgdGhlbg0KCQkJCUNhc3RRKGVuZW15KQ0KCQkJCUhhbmRsZVJDYXN0KGVuZW15KQ0KCQkJZWxzZWlmIGVuZW15LmhlYWx0aCA8PSByRG1nIHRoZW4NCgkJCQlIYW5kbGVSQ2FzdChlbmVteSkNCgkJCWVuZA0KDQoJCQlpZiBTZXR0aW5ncy5rcy5hdXRvSWduaXRlIHRoZW4NCgkJCQlBdXRvSWduaXRlKGVuZW15KQ0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIEF1dG9JZ25pdGUodW5pdCkNCglpZiBWYWxpZFRhcmdldCh1bml0LCBJZ25pdGUucmFuZ2UpIGFuZCB1bml0LmhlYWx0aCA8PSA1MCArICgyMCAqIG15SGVyby5sZXZlbCkgdGhlbg0KCQlpZiBJZ25pdGUucmVhZHkgdGhlbg0KCQkJQ2FzdFNwZWxsKElnbml0ZS5zbG90LCB1bml0KQ0KCQllbmQNCgllbmQNCmVuZA0KDQotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tCQkJIENoZWNrcywgbWVudSAmIHN0dWZmCQkJCQ0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCmZ1bmN0aW9uIENoZWNrcygpDQoJU2tpbGxRLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUSkgPT0gUkVBRFkpDQoJU2tpbGxXLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfVykgPT0gUkVBRFkpDQoJU2tpbGxFLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkpDQoJU2tpbGxSLnJlYWR5ID0gKG15SGVybzpDYW5Vc2VTcGVsbChfUikgPT0gUkVBRFkpDQoJDQoJaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTVU1NT05FUl8xKS5uYW1lOmZpbmQoSWduaXRlLm5hbWUpIHRoZW4NCgkJSWduaXRlLnNsb3QgPSBTVU1NT05FUl8xDQoJZWxzZWlmIG15SGVybzpHZXRTcGVsbERhdGEoU1VNTU9ORVJfMikubmFtZTpmaW5kKElnbml0ZS5uYW1lKSB0aGVuDQoJCUlnbml0ZS5zbG90ID0gU1VNTU9ORVJfMg0KCWVuZA0KCQ0KCUlnbml0ZS5yZWFkeSA9IChJZ25pdGUuc2xvdCB+PSBuaWwgYW5kIG15SGVybzpDYW5Vc2VTcGVsbChJZ25pdGUuc2xvdCkgPT0gUkVBRFkpDQoJDQoJVGFyZ2V0U2VsZWN0b3I6dXBkYXRlKCkNCglUYXJnZXQgPSBHZXRDdXN0b21UYXJnZXQoKQ0KCVN4T3JiOkZvcmNlVGFyZ2V0KFRhcmdldCkNCgkNCglpZiBTZXR0aW5ncy5kcmF3aW5nLmxmYy5sZmMgdGhlbiBfRy5EcmF3Q2lyY2xlID0gRHJhd0NpcmNsZTIgZWxzZSBfRy5EcmF3Q2lyY2xlID0gX0cub2xkRHJhd0NpcmNsZSBlbmQNCgkNCglpZiBUYXJnZXRIYXZlQnVmZigibWJjaGVjazIiLCBteUhlcm8pIHRoZW4gVGhlQmlnT25lID0gdHJ1ZSBlbHNlIFRoZUJpZ09uZSA9IGZhbHNlIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIElzTXlNYW5hTG93KCkNCglpZiBteUhlcm8ubWFuYSA8IChteUhlcm8ubWF4TWFuYSAqICggU2V0dGluZ3MuaGFyYXNzLmhhcmFzc01hbmEgLyAxMDApKSB0aGVuDQoJCXJldHVybiB0cnVlDQoJZWxzZQ0KCQlyZXR1cm4gZmFsc2UNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBNZW51KCkNCglTZXR0aW5ncyA9IHNjcmlwdENvbmZpZygiQ29ya2kgIi4udmVyc2lvbi4uIiIsICJDZW50aWxtZW41MHMiKQ0KCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIktvbWJvIEF5YXJsYXJpIiwgImNvbWJvIikNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oImNvbWJvS2V5IiwgIktvbWJvIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KCQlTZXR0aW5ncy5jb21ibzphZGRQYXJhbSgidXNlUSIsICIiLi5Ta2lsbFEubmFtZS4uIiAoUSkgS29tYm9kYSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIiIuLlNraWxsVy5uYW1lLi4iIChXKSBLb21ib2RhIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7ICJJbWxlY2UgRG9ncnUiLCAiSGVkZWZlIERvZ3J1In0pDQoJCVNldHRpbmdzLmNvbWJvOmFkZFBhcmFtKCJ1c2VFIiwgIiIuLlNraWxsRS5uYW1lLi4iIChFKSBLb21ib2RhIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuY29tYm86YWRkUGFyYW0oImNvbWJvSXRlbXMiLCAiSXRlbWxhcmkgS3VsbGFuIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5jb21ibzpwZXJtYVNob3coImNvbWJvS2V5IikNCgkNCglTZXR0aW5nczphZGRTdWJNZW51KCJEdXJ0bWUgQXlhcmxhcmkiLCAiaGFyYXNzIikNCgkJU2V0dGluZ3MuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NLZXkiLCAiRHVydG1lIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIEdldEtleSgiQyIpKQ0KCQlTZXR0aW5ncy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCAiIi4uU2tpbGxRLm5hbWUuLiIgKFEpIER1cnRtZWRlIEt1bGxhbiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuaGFyYXNzOmFkZFBhcmFtKCJ1c2VSIiwgIiIuLlNraWxsUi5uYW1lLi4iIChSKSBEdXJ0bWVkZSBLdWxsYW4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmhhcmFzczphZGRQYXJhbSgiaGFyYXNzTWFuYSIsICJNaW4uIE1hbmEgUGVyY2VudDogIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCA1MCwgMCwgMTAwLCAwKQ0KCQlTZXR0aW5ncy5oYXJhc3M6cGVybWFTaG93KCJoYXJhc3NLZXkiKQ0KCQkNCglTZXR0aW5nczphZGRTdWJNZW51KCJLb3JpZG9yIFRlbWl6bGVtZSBBeWFybGFyaSIsICJsYW5lIikNCgkJU2V0dGluZ3MubGFuZTphZGRQYXJhbSgibGFuZUtleSIsICJLb3JpZG9yIFRlbWl6bGVtZSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoIlYiKSkNCgkJU2V0dGluZ3MubGFuZTphZGRQYXJhbSgibGFuZVEiLCAiIi4uU2tpbGxRLm5hbWUuLiIgKFEpIElsZSBLb3JpZG9yIFRlbWl6bGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmxhbmU6YWRkUGFyYW0oImxhbmVSIiwgIiIuLlNraWxsUi5uYW1lLi4iIChSKSBJbGUgS29yaWRvciBUZW1pemxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5sYW5lOnBlcm1hU2hvdygibGFuZUtleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIk9ybWFuIFRlbWl6bGVtZSBBeWFybGFyaSIsICJqdW5nbGUiKQ0KCQlTZXR0aW5ncy5qdW5nbGU6YWRkUGFyYW0oImp1bmdsZUtleSIsICJPcm1hbiBUZW1pemxlbWUiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgR2V0S2V5KCJWIikpDQoJCVNldHRpbmdzLmp1bmdsZTphZGRQYXJhbSgianVuZ2xlUSIsICIiLi5Ta2lsbFEubmFtZS4uIiAoUSkgSWxlIE9ybWFuIFRlbWl6bGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmp1bmdsZTphZGRQYXJhbSgianVuZ2xlUiIsICIiLi5Ta2lsbFIubmFtZS4uIiAoUikgSWxlIE9ybWFuIFRlbWl6bGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmp1bmdsZTpwZXJtYVNob3coImp1bmdsZUtleSIpDQoJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIktpbGwgQ2FsbWEgQXlhcmxhcmkiLCAia3MiKQ0KCQlTZXR0aW5ncy5rczphZGRQYXJhbSgia2lsbFN0ZWFsIiwgIktsYXNpayBLaWxsIENhbG1hIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5rczphZGRQYXJhbSgiYXV0b0lnbml0ZSIsICJPdG8gVHV0dXN0dXIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmtzOnBlcm1hU2hvdygia2lsbFN0ZWFsIikNCgkJCQ0KCVNldHRpbmdzOmFkZFN1Yk1lbnUoIkNpemltIEF5YXJsYXJpIiwgImRyYXdpbmciKQkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgibURyYXciLCAiQnV0dW4gQ2l6aW1sZXJpIERldnJlIERpc2kgQmlyYWsiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFBhcmFtKCJUYXJnZXQiLCAiRHJhdyBDaXJjbGUgb24gVGFyZ2V0IiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFBhcmFtKCJUZXh0IiwgIkRyYXcgVGV4dCBvbiBUYXJnZXQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oIm15SGVybyIsICJCZW5pbSBNZW56aWxpbSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgibXlDb2xvciIsICJCZW5pbSBNZW56aWxpbWluIFJlbmdpIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgicURyYXciLCAiIi4uU2tpbGxRLm5hbWUuLiIgKFEpIE1lbnppbGkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oInFDb2xvciIsICIiLi5Ta2lsbFEubmFtZS4uIiAoUSkgUmVuZ2kiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFBhcmFtKCJ3RHJhdyIsICIiLi5Ta2lsbFcubmFtZS4uIiAoVykgTWVuemlsaSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgid0NvbG9yIiwgIiIuLlNraWxsVy5uYW1lLi4iIChXKSBSZW5naSIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAyNTUsIDI1NX0pDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oImVEcmF3IiwgIiIuLlNraWxsRS5uYW1lLi4iIChFKSBNZW56aWxpIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KCQlTZXR0aW5ncy5kcmF3aW5nOmFkZFBhcmFtKCJlQ29sb3IiLCAiIi4uU2tpbGxFLm5hbWUuLiIgKEUpIFJlbmdpIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRQYXJhbSgickRyYXciLCAiIi4uU2tpbGxSLm5hbWUuLiIgKFIpIE1lbnppbGkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQoJCVNldHRpbmdzLmRyYXdpbmc6YWRkUGFyYW0oInJDb2xvciIsICIiLi5Ta2lsbFIubmFtZS4uIiAoUikgUmVuZ2kiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KCQkNCgkJU2V0dGluZ3MuZHJhd2luZzphZGRTdWJNZW51KCJMYWcgRnJlZSBDaXJjbGVzIiwgImxmYyIpCQ0KCQkJU2V0dGluZ3MuZHJhd2luZy5sZmM6YWRkUGFyYW0oImxmYyIsICJMYWcgRnJlZSBDaXJjbGVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCgkJCVNldHRpbmdzLmRyYXdpbmcubGZjOmFkZFBhcmFtKCJDTCIsICJRdWFsaXR5IiwgNCwgNzUsIDc1LCAyMDAwLCAwKQ0KCQkJU2V0dGluZ3MuZHJhd2luZy5sZmM6YWRkUGFyYW0oIldpZHRoIiwgIldpZHRoIiwgNCwgMSwgMSwgMTAsIDApDQoJDQoJU2V0dGluZ3M6YWRkU3ViTWVudSgiT3Jid2Fsa2luZyBBeWFybGFyaSIsICJPcmJ3YWxraW5nIikNCgkJU3hPcmI6TG9hZFRvTWVudShTZXR0aW5ncy5PcmJ3YWxraW5nKQ0KCQ0KCVRhcmdldFNlbGVjdG9yID0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVCwgU2tpbGxSLnJhbmdlLCBEQU1BR0VfUEhZU0lDQUwsIHRydWUpDQoJVGFyZ2V0U2VsZWN0b3IubmFtZSA9ICJDb3JraSINCglTZXR0aW5nczphZGRUUyhUYXJnZXRTZWxlY3RvcikNCmVuZA0KDQpmdW5jdGlvbiBWYXJpYWJsZXMoKQ0KCVNraWxsUSA9IHsgbmFtZSA9ICJGb3Nmb3IgQm9tYmFzaSIsIHJhbmdlID0gODI1LCBkZWxheSA9IDAuNSwgc3BlZWQgPSAxMTI1LCB3aWR0aCA9IDQ1MCwgcmVhZHkgPSBmYWxzZSB9DQoJU2tpbGxXID0geyBuYW1lID0gIlZhbGt5cmllIiwgcmFuZ2UgPSA4MDAsIGRlbGF5ID0gbmlsLCBzcGVlZCA9IG5pbCwgd2lkdGggPSBuaWwsIHJlYWR5ID0gZmFsc2UgfQ0KCVNraWxsRSA9IHsgbmFtZSA9ICJNYWtpbmVsaSBUdWZlayIsIHJhbmdlID0gNjAwLCBkZWxheSA9IG5pbCwgc3BlZWQgPSBuaWwsIHdpZHRoID0gbmlsLCByZWFkeSA9IGZhbHNlIH0NCglTa2lsbFIgPSB7IG5hbWUgPSAiRnV6ZSBTYWx2b3N1IiwgcmFuZ2UgPSAxMjI1LCBkZWxheSA9IDAuMjUsIHNwZWVkID0gMjAwMCwgd2lkdGggPSA3NSwgcmVhZHkgPSBmYWxzZSB9DQoJSWduaXRlID0geyBuYW1lID0gInN1bW1vbmVyZG90IiwgcmFuZ2UgPSA2MDAsIHNsb3QgPSBuaWwgfQ0KCQ0KCWVuZW15TWluaW9ucyA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0VORU1ZLCBTa2lsbFIucmFuZ2UsIG15SGVybywgTUlOSU9OX1NPUlRfSEVBTFRIX0FTQykNCgkNCglWUCA9IFZQcmVkaWN0aW9uKCkNCgkNCglKdW5nbGVNb2JzID0ge30NCglKdW5nbGVGb2N1c01vYnMgPSB7fQ0KCQ0KCVRoZUJpZ09uZSA9IGZhbHNlDQoJDQoJaWYgR2V0R2FtZSgpLm1hcC5zaG9ydE5hbWUgPT0gInR3aXN0ZWRUcmVlbGluZSIgdGhlbg0KCQlUd2lzdGVkVHJlZWxpbmUgPSB0cnVlIA0KCWVsc2UNCgkJVHdpc3RlZFRyZWVsaW5lID0gZmFsc2UNCgllbmQNCgkNCglfRy5vbGREcmF3Q2lyY2xlID0gcmF3Z2V0KF9HLCAnRHJhd0NpcmNsZScpDQoJX0cuRHJhd0NpcmNsZSA9IERyYXdDaXJjbGUyCQ0KCQ0KCXByaW9yaXR5VGFibGUgPSB7DQoJCQlBUCA9IHsNCgkJCQkiQW5uaWUiLCAiQWhyaSIsICJBa2FsaSIsICJBbml2aWEiLCAiQW5uaWUiLCAiQnJhbmQiLCAiQ2Fzc2lvcGVpYSIsICJEaWFuYSIsICJFdmVseW5uIiwgIkZpZGRsZVN0aWNrcyIsICJGaXp6IiwgIkdyYWdhcyIsICJIZWltZXJkaW5nZXIiLCAiS2FydGh1cyIsDQoJCQkJIkthc3NhZGluIiwgIkthdGFyaW5hIiwgIktheWxlIiwgIktlbm5lbiIsICJMZWJsYW5jIiwgIkxpc3NhbmRyYSIsICJMdXgiLCAiTWFsemFoYXIiLCAiTW9yZGVrYWlzZXIiLCAiTW9yZ2FuYSIsICJOaWRhbGVlIiwgIk9yaWFubmEiLA0KCQkJCSJSeXplIiwgIlNpb24iLCAiU3dhaW4iLCAiU3luZHJhIiwgIlRlZW1vIiwgIlR3aXN0ZWRGYXRlIiwgIlZlaWdhciIsICJWaWt0b3IiLCAiVmxhZGltaXIiLCAiWGVyYXRoIiwgIlppZ2dzIiwgIlp5cmEiLCAiVmVsa296Ig0KCQkJfSwNCgkJCQ0KCQkJU3VwcG9ydCA9IHsNCgkJCQkiQWxpc3RhciIsICJCbGl0emNyYW5rIiwgIkphbm5hIiwgIkthcm1hIiwgIkxlb25hIiwgIkx1bHUiLCAiTmFtaSIsICJOdW51IiwgIlNvbmEiLCAiU29yYWthIiwgIlRhcmljIiwgIlRocmVzaCIsICJaaWxlYW4iLCAiQnJhdW0iDQoJCQl9LA0KCQkJDQoJCQlUYW5rID0gew0KCQkJCSJBbXVtdSIsICJDaG9nYXRoIiwgIkRyTXVuZG8iLCAiR2FsaW8iLCAiSGVjYXJpbSIsICJNYWxwaGl0ZSIsICJNYW9rYWkiLCAiTmFzdXMiLCAiUmFtbXVzIiwgIlNlanVhbmkiLCAiTmF1dGlsdXMiLCAiU2hlbiIsICJTaW5nZWQiLCAiU2thcm5lciIsICJWb2xpYmVhciIsDQoJCQkJIldhcndpY2siLCAiWW9yaWNrIiwgIlphYyINCgkJCX0sDQoJCQkNCgkJCUFEX0NhcnJ5ID0gew0KCQkJCSJBc2hlIiwgIkNhaXRseW4iLCAiQ29ya2kiLCAiRHJhdmVuIiwgIkV6cmVhbCIsICJHcmF2ZXMiLCAiSmF5Y2UiLCAiSmlueCIsICJLb2dNYXciLCAiTHVjaWFuIiwgIk1hc3RlcllpIiwgIk1pc3NGb3J0dW5lIiwgIlBhbnRoZW9uIiwgIlF1aW5uIiwgIlNoYWNvIiwgIlNpdmlyIiwNCgkJCQkiVGFsb24iLCJUcnluZGFtZXJlIiwgIlRyaXN0YW5hIiwgIlR3aXRjaCIsICJVcmdvdCIsICJWYXJ1cyIsICJWYXluZSIsICJZYXN1byIsICJaZWQiDQoJCQl9LA0KCQkJDQoJCQlCcnVpc2VyID0gew0KCQkJCSJBYXRyb3giLCAiRGFyaXVzIiwgIkVsaXNlIiwgIkZpb3JhIiwgIkdhbmdwbGFuayIsICJHYXJlbiIsICJJcmVsaWEiLCAiSmFydmFuSVYiLCAiSmF4IiwgIktoYXppeCIsICJMZWVTaW4iLCAiTm9jdHVybmUiLCAiT2xhZiIsICJQb3BweSIsDQoJCQkJIlJlbmVrdG9uIiwgIlJlbmdhciIsICJSaXZlbiIsICJSdW1ibGUiLCAiU2h5dmFuYSIsICJUcnVuZGxlIiwgIlVkeXIiLCAiVmkiLCAiTW9ua2V5S2luZyIsICJYaW5aaGFvIg0KCQkJfQ0KCX0NCg0KCUl0ZW1zID0gew0KCQlCUksgPSB7IGlkID0gMzE1MywgcmFuZ2UgPSA0NTAsIHJlcVRhcmdldCA9IHRydWUsIHNsb3QgPSBuaWwgfSwNCgkJQldDID0geyBpZCA9IDMxNDQsIHJhbmdlID0gNDAwLCByZXFUYXJnZXQgPSB0cnVlLCBzbG90ID0gbmlsIH0sDQoJCURGRyA9IHsgaWQgPSAzMTI4LCByYW5nZSA9IDc1MCwgcmVxVGFyZ2V0ID0gdHJ1ZSwgc2xvdCA9IG5pbCB9LA0KCQlIR0IgPSB7IGlkID0gMzE0NiwgcmFuZ2UgPSA0MDAsIHJlcVRhcmdldCA9IHRydWUsIHNsb3QgPSBuaWwgfSwNCgkJUlNIID0geyBpZCA9IDMwNzQsIHJhbmdlID0gMzUwLCByZXFUYXJnZXQgPSBmYWxzZSwgc2xvdCA9IG5pbCB9LA0KCQlTVEQgPSB7IGlkID0gMzEzMSwgcmFuZ2UgPSAzNTAsIHJlcVRhcmdldCA9IGZhbHNlLCBzbG90ID0gbmlsIH0sDQoJCVRNVCA9IHsgaWQgPSAzMDc3LCByYW5nZSA9IDM1MCwgcmVxVGFyZ2V0ID0gZmFsc2UsIHNsb3QgPSBuaWwgfSwNCgkJWUdCID0geyBpZCA9IDMxNDIsIHJhbmdlID0gMzUwLCByZXFUYXJnZXQgPSBmYWxzZSwgc2xvdCA9IG5pbCB9LA0KCQlCRlQgPSB7IGlkID0gMzE4OCwgcmFuZ2UgPSA3NTAsIHJlcVRhcmdldCA9IHRydWUsIHNsb3QgPSBuaWwgfSwNCgkJUk5EID0geyBpZCA9IDMxNDMsIHJhbmdlID0gMjc1LCByZXFUYXJnZXQgPSBmYWxzZSwgc2xvdCA9IG5pbCB9DQoJfQ0KCQ0KCWlmIG5vdCBUd2lzdGVkVHJlZWxpbmUgdGhlbg0KCQlKdW5nbGVNb2JOYW1lcyA9IHsgDQoJCQlbIlNSVV9NdXJrd29sZk1pbmkyLjEuMyJdCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xmTWluaTIuMS4yIl0JPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGZNaW5pOC4xLjMiXQk9IHRydWUsDQoJCQlbIlNSVV9NdXJrd29sZk1pbmk4LjEuMiJdCT0gdHJ1ZSwNCgkJCVsiU1JVX0JsdWVNaW5pMS4xLjIiXQkJPSB0cnVlLA0KCQkJWyJTUlVfQmx1ZU1pbmk3LjEuMiJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTIxLjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlTWluaTI3LjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9SZWRNaW5pMTAuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmkxMC4xLjMiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkTWluaTQuMS4yIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZE1pbmk0LjEuMyJdCQk9IHRydWUsDQoJCQlbIlNSVV9LcnVnTWluaTExLjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9LcnVnTWluaTUuMS4xIl0JCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuMiJdCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuMyJdCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmk5LjEuNCJdCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuMiJdCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuMyJdCT0gdHJ1ZSwNCgkJCVsiU1JVX1Jhem9yYmVha01pbmkzLjEuNCJdCT0gdHJ1ZQ0KCQl9DQoJCQ0KCQlGb2N1c0p1bmdsZU5hbWVzID0gew0KCQkJWyJTUlVfQmx1ZTEuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlNSVV9CbHVlNy4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX011cmt3b2xmMi4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfTXVya3dvbGY4LjEuMSJdCQk9IHRydWUsDQoJCQlbIlNSVV9Hcm9tcDEzLjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfR3JvbXAxNC4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU3J1X0NyYWIxNi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU3J1X0NyYWIxNS4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX1JlZDEwLjEuMSJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfUmVkNC4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0tydWcxMS4xLjIiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0tydWc1LjEuMiJdCQkJPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrOS4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfUmF6b3JiZWFrMy4xLjEiXQkJPSB0cnVlLA0KCQkJWyJTUlVfRHJhZ29uNi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiU1JVX0Jhcm9uMTIuMS4xIl0JCQk9IHRydWUNCgkJfQ0KCWVsc2UNCgkJRm9jdXNKdW5nbGVOYW1lcyA9IHsNCgkJCVsiVFRfTldyYWl0aDEuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Hb2xlbTIuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmMy4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfTldyYWl0aDQuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Hb2xlbTUuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmNi4xLjEiXQkJCT0gdHJ1ZSwNCgkJCVsiVFRfU3BpZGVyYm9zczguMS4xIl0JCT0gdHJ1ZQ0KCQl9CQkNCgkJSnVuZ2xlTW9iTmFtZXMgPSB7DQoJCQlbIlRUX05XcmFpdGgyMS4xLjIiXQkJPSB0cnVlLA0KCQkJWyJUVF9OV3JhaXRoMjEuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiVFRfTkdvbGVtMjIuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmMjMuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmMjMuMS4zIl0JCQk9IHRydWUsDQoJCQlbIlRUX05XcmFpdGgyNC4xLjIiXQkJPSB0cnVlLA0KCQkJWyJUVF9OV3JhaXRoMjQuMS4zIl0JCT0gdHJ1ZSwNCgkJCVsiVFRfTkdvbGVtMjUuMS4xIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmMjYuMS4yIl0JCQk9IHRydWUsDQoJCQlbIlRUX05Xb2xmMjYuMS4zIl0JCQk9IHRydWUNCgkJfQ0KCWVuZA0KCQkNCglmb3IgaSA9IDAsIG9iak1hbmFnZXIubWF4T2JqZWN0cyBkbw0KCQlsb2NhbCBvYmplY3QgPSBvYmpNYW5hZ2VyOmdldE9iamVjdChpKQ0KCQlpZiBvYmplY3QgYW5kIG9iamVjdC52YWxpZCBhbmQgbm90IG9iamVjdC5kZWFkIHRoZW4NCgkJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqZWN0Lm5hbWVdIHRoZW4NCgkJCQlKdW5nbGVGb2N1c01vYnNbI0p1bmdsZUZvY3VzTW9icysxXSA9IG9iamVjdA0KCQkJZWxzZWlmIEp1bmdsZU1vYk5hbWVzW29iamVjdC5uYW1lXSB0aGVuDQoJCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iamVjdA0KCQkJZW5kDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFNldFByaW9yaXR5KHRhYmxlLCBoZXJvLCBwcmlvcml0eSkNCglmb3IgaT0xLCAjdGFibGUsIDEgZG8NCgkJaWYgaGVyby5jaGFyTmFtZTpmaW5kKHRhYmxlW2ldKSB+PSBuaWwgdGhlbg0KCQkJVFNfU2V0SGVyb1ByaW9yaXR5KHByaW9yaXR5LCBoZXJvLmNoYXJOYW1lKQ0KCQllbmQNCgllbmQNCmVuZA0KIA0KZnVuY3Rpb24gYXJyYW5nZVByaW9yaXR5cygpDQoJCWZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5BRF9DYXJyeSwgZW5lbXksIDEpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQVAsCSAgIGVuZW15LCAyKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlN1cHBvcnQsICBlbmVteSwgMykNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5CcnVpc2VyLCAgZW5lbXksIDQpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuVGFuaywJIGVuZW15LCA1KQ0KCQllbmQNCmVuZA0KDQpmdW5jdGlvbiBhcnJhbmdlUHJpb3JpdHlzVFQoKQ0KICAgICAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQURfQ2FycnksIGVuZW15LCAxKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLkFQLCAgICAgICBlbmVteSwgMSkNCgkJU2V0UHJpb3JpdHkocHJpb3JpdHlUYWJsZS5TdXBwb3J0LCAgZW5lbXksIDIpDQoJCVNldFByaW9yaXR5KHByaW9yaXR5VGFibGUuQnJ1aXNlciwgIGVuZW15LCAyKQ0KCQlTZXRQcmlvcml0eShwcmlvcml0eVRhYmxlLlRhbmssICAgICBlbmVteSwgMykNCiAgICAgICAgZW5kDQplbmQNCg0KZnVuY3Rpb24gVXNlSXRlbXModW5pdCkNCglpZiB1bml0IH49IG5pbCB0aGVuDQoJCWZvciBfLCBpdGVtIGluIHBhaXJzKEl0ZW1zKSBkbw0KCQkJaXRlbS5zbG90ID0gR2V0SW52ZW50b3J5U2xvdEl0ZW0oaXRlbS5pZCkNCgkJCWlmIGl0ZW0uc2xvdCB+PSBuaWwgdGhlbg0KCQkJCWlmIGl0ZW0ucmVxVGFyZ2V0IGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IGl0ZW0ucmFuZ2UgdGhlbg0KCQkJCQlDYXN0U3BlbGwoaXRlbS5zbG90LCB1bml0KQ0KCQkJCWVsc2VpZiBub3QgaXRlbS5yZXFUYXJnZXQgdGhlbg0KCQkJCQlpZiAoR2V0RGlzdGFuY2UodW5pdCkgLSBnZXRIaXRCb3hSYWRpdXMobXlIZXJvKSAtIGdldEhpdEJveFJhZGl1cyh1bml0KSkgPCA1MCB0aGVuDQoJCQkJCQlDYXN0U3BlbGwoaXRlbS5zbG90KQ0KCQkJCQllbmQNCgkJCQllbmQNCgkJCWVuZA0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBnZXRIaXRCb3hSYWRpdXModGFyZ2V0KQ0KCXJldHVybiBHZXREaXN0YW5jZSh0YXJnZXQubWluQkJveCwgdGFyZ2V0Lm1heEJCb3gpLzINCmVuZA0KDQpmdW5jdGlvbiBQcmlvcml0eU9uTG9hZCgpDQoJaWYgaGVyb01hbmFnZXIuaUNvdW50IDwgMTAgb3IgKFR3aXN0ZWRUcmVlbGluZSBhbmQgaGVyb01hbmFnZXIuaUNvdW50IDwgNikgdGhlbg0KCQkNCgllbHNlaWYgaGVyb01hbmFnZXIuaUNvdW50ID09IDYgdGhlbg0KCQlhcnJhbmdlUHJpb3JpdHlzVFQoKQ0KICAgIGVsc2UNCgkJYXJyYW5nZVByaW9yaXR5cygpDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gR2V0SnVuZ2xlTW9iKCkNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZUZvY3VzTW9icykgZG8NCgkJaWYgVmFsaWRUYXJnZXQoTW9iLCBTa2lsbFIucmFuZ2UpIHRoZW4gcmV0dXJuIE1vYiBlbmQNCgllbmQNCglmb3IgXywgTW9iIGluIHBhaXJzKEp1bmdsZU1vYnMpIGRvDQoJCWlmIFZhbGlkVGFyZ2V0KE1vYiwgU2tpbGxSLnJhbmdlKSB0aGVuIHJldHVybiBNb2IgZW5kDQoJZW5kDQplbmQNCg0KZnVuY3Rpb24gT25DcmVhdGVPYmoob2JqKQ0KCWlmIG9iai52YWxpZCB0aGVuDQoJCWlmIEZvY3VzSnVuZ2xlTmFtZXNbb2JqLm5hbWVdIHRoZW4NCgkJCUp1bmdsZUZvY3VzTW9ic1sjSnVuZ2xlRm9jdXNNb2JzKzFdID0gb2JqDQoJCWVsc2VpZiBKdW5nbGVNb2JOYW1lc1tvYmoubmFtZV0gdGhlbg0KCQkJSnVuZ2xlTW9ic1sjSnVuZ2xlTW9icysxXSA9IG9iag0KCQllbmQNCgllbmQNCmVuZA0KDQpmdW5jdGlvbiBPbkRlbGV0ZU9iaihvYmopDQoJZm9yIGksIE1vYiBpbiBwYWlycyhKdW5nbGVNb2JzKSBkbw0KCQlpZiBvYmoubmFtZSA9PSBNb2IubmFtZSB0aGVuDQoJCQl0YWJsZS5yZW1vdmUoSnVuZ2xlTW9icywgaSkNCgkJZW5kDQoJZW5kDQoJZm9yIGksIE1vYiBpbiBwYWlycyhKdW5nbGVGb2N1c01vYnMpIGRvDQoJCWlmIG9iai5uYW1lID09IE1vYi5uYW1lIHRoZW4NCgkJCXRhYmxlLnJlbW92ZShKdW5nbGVGb2N1c01vYnMsIGkpDQoJCWVuZA0KCWVuZA0KZW5kDQoNCmZ1bmN0aW9uIFRydWVSYW5nZSgpDQoJcmV0dXJuIG15SGVyby5yYW5nZSArIEdldERpc3RhbmNlKG15SGVybywgbXlIZXJvLm1pbkJCb3gpDQplbmQNCg0KLS0gVHJlZXMNCmZ1bmN0aW9uIEdldEN1c3RvbVRhcmdldCgpDQogCVRhcmdldFNlbGVjdG9yOnVwZGF0ZSgpIAkNCglpZiBfRy5NTUFfVGFyZ2V0IGFuZCBfRy5NTUFfVGFyZ2V0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbiByZXR1cm4gX0cuTU1BX1RhcmdldCBlbmQNCglpZiBfRy5BdXRvQ2FycnkgYW5kIF9HLkF1dG9DYXJyeS5Dcm9zc2hhaXIgYW5kIF9HLkF1dG9DYXJyeS5BdHRhY2tfQ3Jvc3NoYWlyIGFuZCBfRy5BdXRvQ2FycnkuQXR0YWNrX0Nyb3NzaGFpci50YXJnZXQgYW5kIF9HLkF1dG9DYXJyeS5BdHRhY2tfQ3Jvc3NoYWlyLnRhcmdldC50eXBlID09IG15SGVyby50eXBlIHRoZW4gcmV0dXJuIF9HLkF1dG9DYXJyeS5BdHRhY2tfQ3Jvc3NoYWlyLnRhcmdldCBlbmQNCglyZXR1cm4gVGFyZ2V0U2VsZWN0b3IudGFyZ2V0DQplbmQNCg0KZnVuY3Rpb24gR2V0QmVzdENpcmN1bGFyRmFybVBvc2l0aW9uKHJhbmdlLCByYWRpdXMsIG9iamVjdHMpDQogICAgbG9jYWwgQmVzdFBvcyANCiAgICBsb2NhbCBCZXN0SGl0ID0gMA0KICAgIGZvciBpLCBvYmplY3QgaW4gaXBhaXJzKG9iamVjdHMpIGRvDQogICAgICAgIGxvY2FsIGhpdCA9IENvdW50T2JqZWN0c05lYXJQb3Mob2JqZWN0LnBvcyBvciBvYmplY3QsIHJhbmdlLCByYWRpdXMsIG9iamVjdHMpDQogICAgICAgIGlmIGhpdCA+IEJlc3RIaXQgdGhlbg0KICAgICAgICAgICAgQmVzdEhpdCA9IGhpdA0KICAgICAgICAgICAgQmVzdFBvcyA9IFZlY3RvcihvYmplY3QpDQogICAgICAgICAgICBpZiBCZXN0SGl0ID09ICNvYmplY3RzIHRoZW4NCiAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbmQNCiAgICAgICAgIGVuZA0KICAgIGVuZA0KICAgIHJldHVybiBCZXN0UG9zLCBCZXN0SGl0DQplbmQNCg0KZnVuY3Rpb24gQ291bnRPYmplY3RzTmVhclBvcyhwb3MsIHJhbmdlLCByYWRpdXMsIG9iamVjdHMpDQogICAgbG9jYWwgbiA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBpZiBHZXREaXN0YW5jZShwb3MsIG9iamVjdCkgPD0gcmFkaXVzIHRoZW4NCiAgICAgICAgICAgIG4gPSBuICsgMQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gbg0KZW5kDQoNCi0tIEJhcmFzaWEsIHZhZGFzaCwgdmlzZXZlcnNhDQpmdW5jdGlvbiBEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIHdpZHRoLCBjb2xvciwgY2hvcmRsZW5ndGgpDQogIHJhZGl1cyA9IHJhZGl1cyBvciAzMDANCiAgcXVhbGl0eSA9IG1hdGgubWF4KDgscm91bmQoMTgwL21hdGguZGVnKChtYXRoLmFzaW4oKGNob3JkbGVuZ3RoLygyKnJhZGl1cykpKSkpKSkNCiAgcXVhbGl0eSA9IDIgKiBtYXRoLnBpIC8gcXVhbGl0eQ0KICByYWRpdXMgPSByYWRpdXMqLjkyDQogIA0KICBsb2NhbCBwb2ludHMgPSB7fQ0KICBmb3IgdGhldGEgPSAwLCAyICogbWF0aC5waSArIHF1YWxpdHksIHF1YWxpdHkgZG8NCiAgICBsb2NhbCBjID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh4ICsgcmFkaXVzICogbWF0aC5jb3ModGhldGEpLCB5LCB6IC0gcmFkaXVzICogbWF0aC5zaW4odGhldGEpKSkNCiAgICBwb2ludHNbI3BvaW50cyArIDFdID0gRDNEWFZFQ1RPUjIoYy54LCBjLnkpDQogIGVuZA0KICANCiAgRHJhd0xpbmVzMihwb2ludHMsIHdpZHRoIG9yIDEsIGNvbG9yIG9yIDQyOTQ5NjcyOTUpDQplbmQNCg0KZnVuY3Rpb24gcm91bmQobnVtKSANCiAgaWYgbnVtID49IDAgdGhlbiByZXR1cm4gbWF0aC5mbG9vcihudW0rLjUpIGVsc2UgcmV0dXJuIG1hdGguY2VpbChudW0tLjUpIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIERyYXdDaXJjbGUyKHgsIHksIHosIHJhZGl1cywgY29sb3IpDQogIGxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopDQogIGxvY2FsIHZQb3MyID0gVmVjdG9yKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnopDQogIGxvY2FsIHRQb3MgPSB2UG9zMSAtICh2UG9zMSAtIHZQb3MyKTpub3JtYWxpemVkKCkgKiByYWRpdXMNCiAgbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpDQogIA0KICBpZiBPblNjcmVlbih7IHggPSBzUG9zLngsIHkgPSBzUG9zLnkgfSwgeyB4ID0gc1Bvcy54LCB5ID0gc1Bvcy55IH0pIHRoZW4NCiAgICBEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIFNldHRpbmdzLmRyYXdpbmcubGZjLldpZHRoLCBjb2xvciwgU2V0dGluZ3MuZHJhd2luZy5sZmMuQ0wpIA0KICBlbmQNCmVuZA0KDQplbmQ="), nil, "bt", _ENV))()
  
